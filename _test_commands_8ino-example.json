{
  "version": "1.14.0",
  "compound": {
    "kind": "example",
    "id": "_test_commands_8ino-example",
    "name": "TestCommands.ino",
    "url_base": "_test_commands_8ino-example",
    "url": "_test_commands_8ino-example.html",
    "include": null,
    "has_template_details": false,
    "templates": null,
    "brief": "",
    "description": "<aside class=\"m-note m-default\"><h4>Copyright</h4><p>Stroud Water Research Center</p></aside><aside class=\"m-note m-default\"><h4>License</h4><p>This example is published under the BSD-3 license.</p></aside><aside class=\"m-note m-default\"><h4>Author</h4><p>Sara Damiano <a href=\"mailto:sdamiano@stroudcenter.org\">sdamiano@stroudcenter.org</a></p></aside><div class=\"m-code-arduino\"><div class=\"highlight\"><div class=\"line\"><a id=\"l-1\" name=\"l-1\"></a><span class=\"linenos\">  1</span><span class=\"cm\">/**</span></div>\n<div class=\"line\"><a id=\"l-2\" name=\"l-2\"></a><span class=\"linenos\">  2</span><span class=\"cm\"> * @example{lineno} TestCommands.ino</span></div>\n<div class=\"line\"><a id=\"l-3\" name=\"l-3\"></a><span class=\"linenos\">  3</span><span class=\"cm\"> * @copyright Stroud Water Research Center</span></div>\n<div class=\"line\"><a id=\"l-4\" name=\"l-4\"></a><span class=\"linenos\">  4</span><span class=\"cm\"> * @license This example is published under the BSD-3 license.</span></div>\n<div class=\"line\"><a id=\"l-5\" name=\"l-5\"></a><span class=\"linenos\">  5</span><span class=\"cm\"> * @author Sara Damiano &lt;sdamiano@stroudcenter.org&gt;</span></div>\n<div class=\"line\"><a id=\"l-6\" name=\"l-6\"></a><span class=\"linenos\">  6</span><span class=\"cm\"> */</span></div>\n<div class=\"line\"><a id=\"l-7\" name=\"l-7\"></a><span class=\"linenos\">  7</span></div>\n<div class=\"line\"><a id=\"l-8\" name=\"l-8\"></a><span class=\"linenos\">  8</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;SDI12.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-9\" name=\"l-9\"></a><span class=\"linenos\">  9</span></div>\n<div class=\"line\"><a id=\"l-10\" name=\"l-10\"></a><span class=\"linenos\"> 10</span><span class=\"cp\">#ifndef SDI12_DATA_PIN</span></div>\n<div class=\"line\"><a id=\"l-11\" name=\"l-11\"></a><span class=\"linenos\"> 11</span><span class=\"cp\">#define SDI12_DATA_PIN 7</span></div>\n<div class=\"line\"><a id=\"l-12\" name=\"l-12\"></a><span class=\"linenos\"> 12</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-13\" name=\"l-13\"></a><span class=\"linenos\"> 13</span><span class=\"cp\">#ifndef SDI12_POWER_PIN</span></div>\n<div class=\"line\"><a id=\"l-14\" name=\"l-14\"></a><span class=\"linenos\"> 14</span><span class=\"cp\">#define SDI12_POWER_PIN 22</span></div>\n<div class=\"line\"><a id=\"l-15\" name=\"l-15\"></a><span class=\"linenos\"> 15</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-16\" name=\"l-16\"></a><span class=\"linenos\"> 16</span></div>\n<div class=\"line\"><a id=\"l-17\" name=\"l-17\"></a><span class=\"linenos\"> 17</span><span class=\"c1\">// #define TEST_PRINT_ARRAY</span></div>\n<div class=\"line\"><a id=\"l-18\" name=\"l-18\"></a><span class=\"linenos\"> 18</span></div>\n<div class=\"line\"><a id=\"l-19\" name=\"l-19\"></a><span class=\"linenos\"> 19</span><span class=\"cm\">/* connection information */</span></div>\n<div class=\"line\"><a id=\"l-20\" name=\"l-20\"></a><span class=\"linenos\"> 20</span><span class=\"cp\">#if F_CPU &gt; 48000000L</span></div>\n<div class=\"line\"><a id=\"l-21\" name=\"l-21\"></a><span class=\"linenos\"> 21</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">serialBaud</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">921600</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/*!&lt; The baud rate for the output serial port */</span></div>\n<div class=\"line\"><a id=\"l-22\" name=\"l-22\"></a><span class=\"linenos\"> 22</span><span class=\"cp\">#else</span></div>\n<div class=\"line\"><a id=\"l-23\" name=\"l-23\"></a><span class=\"linenos\"> 23</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">serialBaud</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">115200</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/*!&lt; The baud rate for the output serial port */</span></div>\n<div class=\"line\"><a id=\"l-24\" name=\"l-24\"></a><span class=\"linenos\"> 24</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-25\" name=\"l-25\"></a><span class=\"linenos\"> 25</span><span class=\"kr\">int8_t</span><span class=\"w\">       </span><span class=\"n\">dataPin</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">SDI12_DATA_PIN</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"cm\">/*!&lt; The pin of the SDI-12 data bus */</span></div>\n<div class=\"line\"><a id=\"l-26\" name=\"l-26\"></a><span class=\"linenos\"> 26</span><span class=\"kr\">int8_t</span><span class=\"w\">       </span><span class=\"n\">powerPin</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">SDI12_POWER_PIN</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/*!&lt; The sensor power pin (or -1) */</span></div>\n<div class=\"line\"><a id=\"l-27\" name=\"l-27\"></a><span class=\"linenos\"> 27</span><span class=\"kr\">uint32_t</span><span class=\"w\">     </span><span class=\"n\">wake_delay</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/*!&lt; Extra time needed for the sensor to wake (0-100ms) */</span></div>\n<div class=\"line\"><a id=\"l-28\" name=\"l-28\"></a><span class=\"linenos\"> 28</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-29\" name=\"l-29\"></a><span class=\"linenos\"> 29</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/* The first address in the address space to check (0=&#39;0&#39;) */</span></div>\n<div class=\"line\"><a id=\"l-30\" name=\"l-30\"></a><span class=\"linenos\"> 30</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-31\" name=\"l-31\"></a><span class=\"linenos\"> 31</span><span class=\"w\">  </span><span class=\"mi\">61</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/* The last address in the address space to check (61=&#39;z&#39;) */</span></div>\n<div class=\"line\"><a id=\"l-32\" name=\"l-32\"></a><span class=\"linenos\"> 32</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">commandsToTest</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-33\" name=\"l-33\"></a><span class=\"linenos\"> 33</span><span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"cm\">/*!&lt; The number of measurement commands to test, between 1 and 11. */</span></div>\n<div class=\"line\"><a id=\"l-34\" name=\"l-34\"></a><span class=\"linenos\"> 34</span></div>\n<div class=\"line\"><a id=\"l-35\" name=\"l-35\"></a><span class=\"linenos\"> 35</span><span class=\"cm\">/** Define the SDI-12 bus */</span></div>\n<div class=\"line\"><a id=\"l-36\" name=\"l-36\"></a><span class=\"linenos\"> 36</span><span class=\"n\">SDI12</span><span class=\"w\"> </span><span class=\"nf\">mySDI12</span><span class=\"p\">(</span><span class=\"n\">dataPin</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-37\" name=\"l-37\"></a><span class=\"linenos\"> 37</span></div>\n<div class=\"line\"><a id=\"l-38\" name=\"l-38\"></a><span class=\"linenos\"> 38</span><span class=\"cm\">/** Define some testing specs */</span></div>\n<div class=\"line\"><a id=\"l-39\" name=\"l-39\"></a><span class=\"linenos\"> 39</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">n_addresses</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">lastAddress</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-40\" name=\"l-40\"></a><span class=\"linenos\"> 40</span></div>\n<div class=\"line\"><a id=\"l-41\" name=\"l-41\"></a><span class=\"linenos\"> 41</span><span class=\"cm\">/** Error codes, if returned */</span></div>\n<div class=\"line\"><a id=\"l-42\" name=\"l-42\"></a><span class=\"linenos\"> 42</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">error_result_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-43\" name=\"l-43\"></a><span class=\"linenos\"> 43</span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">no_error_value</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-44\" name=\"l-44\"></a><span class=\"linenos\"> 44</span></div>\n<div class=\"line\"><a id=\"l-45\" name=\"l-45\"></a><span class=\"linenos\"> 45</span><span class=\"c1\">/// variable that alternates output type back and forth between parsed and raw</span></div>\n<div class=\"line\"><a id=\"l-46\" name=\"l-46\"></a><span class=\"linenos\"> 46</span><span class=\"kr\">boolean</span><span class=\"w\"> </span><span class=\"n\">flip</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-47\" name=\"l-47\"></a><span class=\"linenos\"> 47</span></div>\n<div class=\"line\"><a id=\"l-48\" name=\"l-48\"></a><span class=\"linenos\"> 48</span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">commands</span><span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;0&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;2&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;3&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;4&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;5&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;6&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;7&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;8&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;9&quot;</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-49\" name=\"l-49\"></a><span class=\"linenos\"> 49</span></div>\n<div class=\"line\"><a id=\"l-50\" name=\"l-50\"></a><span class=\"linenos\"> 50</span><span class=\"c1\">// keeps track of active addresses</span></div>\n<div class=\"line\"><a id=\"l-51\" name=\"l-51\"></a><span class=\"linenos\"> 51</span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-52\" name=\"l-52\"></a><span class=\"linenos\"> 52</span></div>\n<div class=\"line\"><a id=\"l-53\" name=\"l-53\"></a><span class=\"linenos\"> 53</span><span class=\"c1\">// keeps track of the wait time for each active addresses</span></div>\n<div class=\"line\"><a id=\"l-54\" name=\"l-54\"></a><span class=\"linenos\"> 54</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-55\" name=\"l-55\"></a><span class=\"linenos\"> 55</span></div>\n<div class=\"line\"><a id=\"l-56\" name=\"l-56\"></a><span class=\"linenos\"> 56</span><span class=\"c1\">// keeps track of the time each sensor was started</span></div>\n<div class=\"line\"><a id=\"l-57\" name=\"l-57\"></a><span class=\"linenos\"> 57</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-58\" name=\"l-58\"></a><span class=\"linenos\"> 58</span></div>\n<div class=\"line\"><a id=\"l-59\" name=\"l-59\"></a><span class=\"linenos\"> 59</span><span class=\"c1\">// keeps track of the time each sensor will be ready</span></div>\n<div class=\"line\"><a id=\"l-60\" name=\"l-60\"></a><span class=\"linenos\"> 60</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-61\" name=\"l-61\"></a><span class=\"linenos\"> 61</span></div>\n<div class=\"line\"><a id=\"l-62\" name=\"l-62\"></a><span class=\"linenos\"> 62</span><span class=\"c1\">// keeps track of the number of results expected</span></div>\n<div class=\"line\"><a id=\"l-63\" name=\"l-63\"></a><span class=\"linenos\"> 63</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-64\" name=\"l-64\"></a><span class=\"linenos\"> 64</span></div>\n<div class=\"line\"><a id=\"l-65\" name=\"l-65\"></a><span class=\"linenos\"> 65</span><span class=\"c1\">// keeps track of the number of results returned</span></div>\n<div class=\"line\"><a id=\"l-66\" name=\"l-66\"></a><span class=\"linenos\"> 66</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-67\" name=\"l-67\"></a><span class=\"linenos\"> 67</span></div>\n<div class=\"line\"><a id=\"l-68\" name=\"l-68\"></a><span class=\"linenos\"> 68</span><span class=\"kr\">String</span><span class=\"w\">  </span><span class=\"n\">prev_result</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-69\" name=\"l-69\"></a><span class=\"linenos\"> 69</span><span class=\"kr\">String</span><span class=\"w\">  </span><span class=\"n\">this_result</span><span class=\"p\">[</span><span class=\"n\">n_addresses</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-70\" name=\"l-70\"></a><span class=\"linenos\"> 70</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">numSensors</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-71\" name=\"l-71\"></a><span class=\"linenos\"> 71</span></div>\n<div class=\"line\"><a id=\"l-72\" name=\"l-72\"></a><span class=\"linenos\"> 72</span><span class=\"kr\">struct</span><span class=\"w\"> </span><span class=\"nc\">startMeasurementResult</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">  </span><span class=\"c1\">// Structure declaration</span></div>\n<div class=\"line\"><a id=\"l-73\" name=\"l-73\"></a><span class=\"linenos\"> 73</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\">  </span><span class=\"n\">returnedAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-74\" name=\"l-74\"></a><span class=\"linenos\"> 74</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">meas_time_s</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-75\" name=\"l-75\"></a><span class=\"linenos\"> 75</span><span class=\"w\">  </span><span class=\"kr\">int</span><span class=\"w\">     </span><span class=\"n\">numberResults</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-76\" name=\"l-76\"></a><span class=\"linenos\"> 76</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-77\" name=\"l-77\"></a><span class=\"linenos\"> 77</span></div>\n<div class=\"line\"><a id=\"l-78\" name=\"l-78\"></a><span class=\"linenos\"> 78</span><span class=\"kr\">struct</span><span class=\"w\"> </span><span class=\"nc\">getResultsResult</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">  </span><span class=\"c1\">// Structure declaration</span></div>\n<div class=\"line\"><a id=\"l-79\" name=\"l-79\"></a><span class=\"linenos\"> 79</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-80\" name=\"l-80\"></a><span class=\"linenos\"> 80</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">maxDataCommand</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-81\" name=\"l-81\"></a><span class=\"linenos\"> 81</span><span class=\"w\">  </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">addressMatch</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-82\" name=\"l-82\"></a><span class=\"linenos\"> 82</span><span class=\"w\">  </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">crcMatch</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-83\" name=\"l-83\"></a><span class=\"linenos\"> 83</span><span class=\"w\">  </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">errorCode</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-84\" name=\"l-84\"></a><span class=\"linenos\"> 84</span><span class=\"w\">  </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">success</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-85\" name=\"l-85\"></a><span class=\"linenos\"> 85</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-86\" name=\"l-86\"></a><span class=\"linenos\"> 86</span></div>\n<div class=\"line\"><a id=\"l-87\" name=\"l-87\"></a><span class=\"linenos\"> 87</span><span class=\"cm\">/**</span></div>\n<div class=\"line\"><a id=\"l-88\" name=\"l-88\"></a><span class=\"linenos\"> 88</span><span class=\"cm\"> * @brief converts allowable address characters (&#39;0&#39;-&#39;9&#39;, &#39;a&#39;-&#39;z&#39;, &#39;A&#39;-&#39;Z&#39;) to a</span></div>\n<div class=\"line\"><a id=\"l-89\" name=\"l-89\"></a><span class=\"linenos\"> 89</span><span class=\"cm\"> * decimal number between 0 and 61 (inclusive) to cover the 62 possible</span></div>\n<div class=\"line\"><a id=\"l-90\" name=\"l-90\"></a><span class=\"linenos\"> 90</span><span class=\"cm\"> * addresses.</span></div>\n<div class=\"line\"><a id=\"l-91\" name=\"l-91\"></a><span class=\"linenos\"> 91</span><span class=\"cm\"> */</span></div>\n<div class=\"line\"><a id=\"l-92\" name=\"l-92\"></a><span class=\"linenos\"> 92</span><span class=\"kr\">byte</span><span class=\"w\"> </span><span class=\"nf\">charToDec</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-93\" name=\"l-93\"></a><span class=\"linenos\"> 93</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;0&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;9&#39;</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-94\" name=\"l-94\"></a><span class=\"linenos\"> 94</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;a&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;z&#39;</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"sc\">&#39;a&#39;</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-95\" name=\"l-95\"></a><span class=\"linenos\"> 95</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;A&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;Z&#39;</span><span class=\"p\">))</span></div>\n<div class=\"line\"><a id=\"l-96\" name=\"l-96\"></a><span class=\"linenos\"> 96</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"sc\">&#39;A&#39;</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-97\" name=\"l-97\"></a><span class=\"linenos\"> 97</span><span class=\"w\">  </span><span class=\"k\">else</span></div>\n<div class=\"line\"><a id=\"l-98\" name=\"l-98\"></a><span class=\"linenos\"> 98</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-99\" name=\"l-99\"></a><span class=\"linenos\"> 99</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-100\" name=\"l-100\"></a><span class=\"linenos\">100</span></div>\n<div class=\"line\"><a id=\"l-101\" name=\"l-101\"></a><span class=\"linenos\">101</span><span class=\"cm\">/**</span></div>\n<div class=\"line\"><a id=\"l-102\" name=\"l-102\"></a><span class=\"linenos\">102</span><span class=\"cm\"> * @brief maps a decimal number between 0 and 61 (inclusive) to allowable</span></div>\n<div class=\"line\"><a id=\"l-103\" name=\"l-103\"></a><span class=\"linenos\">103</span><span class=\"cm\"> * address characters &#39;0&#39;-&#39;9&#39;, &#39;a&#39;-&#39;z&#39;, &#39;A&#39;-&#39;Z&#39;,</span></div>\n<div class=\"line\"><a id=\"l-104\" name=\"l-104\"></a><span class=\"linenos\">104</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-105\" name=\"l-105\"></a><span class=\"linenos\">105</span><span class=\"cm\"> * THIS METHOD IS UNUSED IN THIS EXAMPLE, BUT IT MAY BE HELPFUL.</span></div>\n<div class=\"line\"><a id=\"l-106\" name=\"l-106\"></a><span class=\"linenos\">106</span><span class=\"cm\"> */</span></div>\n<div class=\"line\"><a id=\"l-107\" name=\"l-107\"></a><span class=\"linenos\">107</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"nf\">decToChar</span><span class=\"p\">(</span><span class=\"kr\">byte</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-108\" name=\"l-108\"></a><span class=\"linenos\">108</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"sc\">&#39;0&#39;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-109\" name=\"l-109\"></a><span class=\"linenos\">109</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"sc\">&#39;a&#39;</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-110\" name=\"l-110\"></a><span class=\"linenos\">110</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"p\">))</span></div>\n<div class=\"line\"><a id=\"l-111\" name=\"l-111\"></a><span class=\"linenos\">111</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"sc\">&#39;A&#39;</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-112\" name=\"l-112\"></a><span class=\"linenos\">112</span><span class=\"w\">  </span><span class=\"k\">else</span></div>\n<div class=\"line\"><a id=\"l-113\" name=\"l-113\"></a><span class=\"linenos\">113</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-114\" name=\"l-114\"></a><span class=\"linenos\">114</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-115\" name=\"l-115\"></a><span class=\"linenos\">115</span></div>\n<div class=\"line\"><a id=\"l-116\" name=\"l-116\"></a><span class=\"linenos\">116</span><span class=\"cm\">/**</span></div>\n<div class=\"line\"><a id=\"l-117\" name=\"l-117\"></a><span class=\"linenos\">117</span><span class=\"cm\"> * @brief gets identification information from a sensor, and prints it to the serial</span></div>\n<div class=\"line\"><a id=\"l-118\" name=\"l-118\"></a><span class=\"linenos\">118</span><span class=\"cm\"> * port</span></div>\n<div class=\"line\"><a id=\"l-119\" name=\"l-119\"></a><span class=\"linenos\">119</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-120\" name=\"l-120\"></a><span class=\"linenos\">120</span><span class=\"cm\"> * @param i a character between &#39;0&#39;-&#39;9&#39;, &#39;a&#39;-&#39;z&#39;, or &#39;A&#39;-&#39;Z&#39;.</span></div>\n<div class=\"line\"><a id=\"l-121\" name=\"l-121\"></a><span class=\"linenos\">121</span><span class=\"cm\"> * @param printIO true to print the raw output and input from the command</span></div>\n<div class=\"line\"><a id=\"l-122\" name=\"l-122\"></a><span class=\"linenos\">122</span><span class=\"cm\"> */</span></div>\n<div class=\"line\"><a id=\"l-123\" name=\"l-123\"></a><span class=\"linenos\">123</span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"nf\">printInfo</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-124\" name=\"l-124\"></a><span class=\"linenos\">124</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-125\" name=\"l-125\"></a><span class=\"linenos\">125</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"p\">)</span><span class=\"n\">address</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-126\" name=\"l-126\"></a><span class=\"linenos\">126</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;I!&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-127\" name=\"l-127\"></a><span class=\"linenos\">127</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">sendCommand</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wake_delay</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-128\" name=\"l-128\"></a><span class=\"linenos\">128</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-129\" name=\"l-129\"></a><span class=\"linenos\">129</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&gt;&gt;&gt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-130\" name=\"l-130\"></a><span class=\"linenos\">130</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-131\" name=\"l-131\"></a><span class=\"linenos\">131</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-132\" name=\"l-132\"></a><span class=\"linenos\">132</span><span class=\"w\">  </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-133\" name=\"l-133\"></a><span class=\"linenos\">133</span></div>\n<div class=\"line\"><a id=\"l-134\" name=\"l-134\"></a><span class=\"linenos\">134</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">readStringUntil</span><span class=\"p\">(</span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-135\" name=\"l-135\"></a><span class=\"linenos\">135</span><span class=\"w\">  </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">trim</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-136\" name=\"l-136\"></a><span class=\"linenos\">136</span><span class=\"w\">  </span><span class=\"c1\">// allccccccccmmmmmmvvvxxx...xx&lt;CR&gt;&lt;LF&gt;</span></div>\n<div class=\"line\"><a id=\"l-137\" name=\"l-137\"></a><span class=\"linenos\">137</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-138\" name=\"l-138\"></a><span class=\"linenos\">138</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-139\" name=\"l-139\"></a><span class=\"linenos\">139</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-140\" name=\"l-140\"></a><span class=\"linenos\">140</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-141\" name=\"l-141\"></a><span class=\"linenos\">141</span></div>\n<div class=\"line\"><a id=\"l-142\" name=\"l-142\"></a><span class=\"linenos\">142</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Address: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-143\" name=\"l-143\"></a><span class=\"linenos\">143</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">));</span><span class=\"w\">  </span><span class=\"c1\">// address</span></div>\n<div class=\"line\"><a id=\"l-144\" name=\"l-144\"></a><span class=\"linenos\">144</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, SDI-12 Version: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-145\" name=\"l-145\"></a><span class=\"linenos\">145</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">).</span><span class=\"n\">toFloat</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// SDI-12 version number</span></div>\n<div class=\"line\"><a id=\"l-146\" name=\"l-146\"></a><span class=\"linenos\">146</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Vendor ID: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-147\" name=\"l-147\"></a><span class=\"linenos\">147</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"p\">));</span><span class=\"w\">  </span><span class=\"c1\">// vendor id</span></div>\n<div class=\"line\"><a id=\"l-148\" name=\"l-148\"></a><span class=\"linenos\">148</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Sensor Model: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-149\" name=\"l-149\"></a><span class=\"linenos\">149</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">11</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"p\">));</span><span class=\"w\">  </span><span class=\"c1\">// sensor model</span></div>\n<div class=\"line\"><a id=\"l-150\" name=\"l-150\"></a><span class=\"linenos\">150</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Sensor Version: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-151\" name=\"l-151\"></a><span class=\"linenos\">151</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">17</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"p\">));</span><span class=\"w\">  </span><span class=\"c1\">// sensor version</span></div>\n<div class=\"line\"><a id=\"l-152\" name=\"l-152\"></a><span class=\"linenos\">152</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Sensor ID: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-153\" name=\"l-153\"></a><span class=\"linenos\">153</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">));</span><span class=\"w\">  </span><span class=\"c1\">// sensor id</span></div>\n<div class=\"line\"><a id=\"l-154\" name=\"l-154\"></a><span class=\"linenos\">154</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-155\" name=\"l-155\"></a><span class=\"linenos\">155</span></div>\n<div class=\"line\"><a id=\"l-156\" name=\"l-156\"></a><span class=\"linenos\">156</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">length</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-157\" name=\"l-157\"></a><span class=\"linenos\">157</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-158\" name=\"l-158\"></a><span class=\"linenos\">158</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-159\" name=\"l-159\"></a><span class=\"linenos\">159</span></div>\n<div class=\"line\"><a id=\"l-160\" name=\"l-160\"></a><span class=\"linenos\">160</span><span class=\"n\">getResultsResult</span><span class=\"w\"> </span><span class=\"nf\">getResults</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">verify_crc</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-161\" name=\"l-161\"></a><span class=\"linenos\">161</span><span class=\"w\">                            </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-162\" name=\"l-162\"></a><span class=\"linenos\">162</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-163\" name=\"l-163\"></a><span class=\"linenos\">163</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-164\" name=\"l-164\"></a><span class=\"linenos\">164</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">cmd_retries</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-165\" name=\"l-165\"></a><span class=\"linenos\">165</span></div>\n<div class=\"line\"><a id=\"l-166\" name=\"l-166\"></a><span class=\"linenos\">166</span><span class=\"w\">  </span><span class=\"c1\">// From SDI-12 Protocol v1.4, Section 4.4 SDI-12 Commands and Responses:</span></div>\n<div class=\"line\"><a id=\"l-167\" name=\"l-167\"></a><span class=\"linenos\">167</span><span class=\"w\">  </span><span class=\"c1\">// The maximum number of characters that can be returned in the &lt;values&gt; part of the</span></div>\n<div class=\"line\"><a id=\"l-168\" name=\"l-168\"></a><span class=\"linenos\">168</span><span class=\"w\">  </span><span class=\"c1\">// response to a D command is either 35 or 75. If the D command is issued to</span></div>\n<div class=\"line\"><a id=\"l-169\" name=\"l-169\"></a><span class=\"linenos\">169</span><span class=\"w\">  </span><span class=\"c1\">// retrieve data in response to a concurrent measurement command, or in response to</span></div>\n<div class=\"line\"><a id=\"l-170\" name=\"l-170\"></a><span class=\"linenos\">170</span><span class=\"w\">  </span><span class=\"c1\">// a high-volume ASCII measurement command, the maximum is 75. The maximum is also</span></div>\n<div class=\"line\"><a id=\"l-171\" name=\"l-171\"></a><span class=\"linenos\">171</span><span class=\"w\">  </span><span class=\"c1\">// 75 in response to a continuous measurement command. Otherwise, the maximum is 35.</span></div>\n<div class=\"line\"><a id=\"l-172\" name=\"l-172\"></a><span class=\"linenos\">172</span><span class=\"w\">  </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">max_sdi_response</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-173\" name=\"l-173\"></a><span class=\"linenos\">173</span><span class=\"w\">  </span><span class=\"c1\">// From SDI-12 Protocol v1.4, Table 11 The send data command (aD0!, aD1! . . . aD9!):</span></div>\n<div class=\"line\"><a id=\"l-174\" name=\"l-174\"></a><span class=\"linenos\">174</span><span class=\"w\">  </span><span class=\"c1\">// - the maximum number of digits for a data value is 7, even without a decimal point</span></div>\n<div class=\"line\"><a id=\"l-175\" name=\"l-175\"></a><span class=\"linenos\">175</span><span class=\"w\">  </span><span class=\"c1\">// - the minimum number of digits for a data value (excluding the decimal point) is 1</span></div>\n<div class=\"line\"><a id=\"l-176\" name=\"l-176\"></a><span class=\"linenos\">176</span><span class=\"w\">  </span><span class=\"c1\">// - the maximum number of characters in a data value is 9 (the (polarity sign + 7</span></div>\n<div class=\"line\"><a id=\"l-177\" name=\"l-177\"></a><span class=\"linenos\">177</span><span class=\"w\">  </span><span class=\"c1\">// digits + the decimal point))</span></div>\n<div class=\"line\"><a id=\"l-178\" name=\"l-178\"></a><span class=\"linenos\">178</span><span class=\"w\">  </span><span class=\"c1\">// - SRGD Note: The polarity symbol (+ or -) acts as a delimeter between the numeric</span></div>\n<div class=\"line\"><a id=\"l-179\" name=\"l-179\"></a><span class=\"linenos\">179</span><span class=\"w\">  </span><span class=\"c1\">// values</span></div>\n<div class=\"line\"><a id=\"l-180\" name=\"l-180\"></a><span class=\"linenos\">180</span><span class=\"w\">  </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">max_sdi_digits</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-181\" name=\"l-181\"></a><span class=\"linenos\">181</span></div>\n<div class=\"line\"><a id=\"l-182\" name=\"l-182\"></a><span class=\"linenos\">182</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">compiled_response</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-183\" name=\"l-183\"></a><span class=\"linenos\">183</span></div>\n<div class=\"line\"><a id=\"l-184\" name=\"l-184\"></a><span class=\"linenos\">184</span><span class=\"w\">  </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-185\" name=\"l-185\"></a><span class=\"linenos\">185</span></div>\n<div class=\"line\"><a id=\"l-186\" name=\"l-186\"></a><span class=\"linenos\">186</span><span class=\"w\">  </span><span class=\"c1\">// Create the return struct</span></div>\n<div class=\"line\"><a id=\"l-187\" name=\"l-187\"></a><span class=\"linenos\">187</span><span class=\"w\">  </span><span class=\"n\">getResultsResult</span><span class=\"w\"> </span><span class=\"n\">return_result</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-188\" name=\"l-188\"></a><span class=\"linenos\">188</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-189\" name=\"l-189\"></a><span class=\"linenos\">189</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">maxDataCommand</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-190\" name=\"l-190\"></a><span class=\"linenos\">190</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">addressMatch</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-191\" name=\"l-191\"></a><span class=\"linenos\">191</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">crcMatch</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-192\" name=\"l-192\"></a><span class=\"linenos\">192</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">errorCode</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-193\" name=\"l-193\"></a><span class=\"linenos\">193</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">success</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-194\" name=\"l-194\"></a><span class=\"linenos\">194</span></div>\n<div class=\"line\"><a id=\"l-195\" name=\"l-195\"></a><span class=\"linenos\">195</span><span class=\"w\">  </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cmd_retries</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-196\" name=\"l-196\"></a><span class=\"linenos\">196</span><span class=\"w\">    </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">gotResults</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-197\" name=\"l-197\"></a><span class=\"linenos\">197</span><span class=\"w\">    </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">cmd_results</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-198\" name=\"l-198\"></a><span class=\"linenos\">198</span></div>\n<div class=\"line\"><a id=\"l-199\" name=\"l-199\"></a><span class=\"linenos\">199</span><span class=\"w\">    </span><span class=\"c1\">// Assemble the command based on how many commands we&#39;ve already sent,</span></div>\n<div class=\"line\"><a id=\"l-200\" name=\"l-200\"></a><span class=\"linenos\">200</span><span class=\"w\">    </span><span class=\"c1\">// starting with D0 and ending with D9</span></div>\n<div class=\"line\"><a id=\"l-201\" name=\"l-201\"></a><span class=\"linenos\">201</span><span class=\"w\">    </span><span class=\"c1\">// SDI-12 command to get data [address][D][dataOption][!]</span></div>\n<div class=\"line\"><a id=\"l-202\" name=\"l-202\"></a><span class=\"linenos\">202</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-203\" name=\"l-203\"></a><span class=\"linenos\">203</span><span class=\"w\">    </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-204\" name=\"l-204\"></a><span class=\"linenos\">204</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-205\" name=\"l-205\"></a><span class=\"linenos\">205</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;D&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-206\" name=\"l-206\"></a><span class=\"linenos\">206</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-207\" name=\"l-207\"></a><span class=\"linenos\">207</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;!&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-208\" name=\"l-208\"></a><span class=\"linenos\">208</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">sendCommand</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wake_delay</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-209\" name=\"l-209\"></a><span class=\"linenos\">209</span><span class=\"w\">    </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-210\" name=\"l-210\"></a><span class=\"linenos\">210</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-211\" name=\"l-211\"></a><span class=\"linenos\">211</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&gt;&gt;&gt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-212\" name=\"l-212\"></a><span class=\"linenos\">212</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-213\" name=\"l-213\"></a><span class=\"linenos\">213</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-214\" name=\"l-214\"></a><span class=\"linenos\">214</span><span class=\"w\">    </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">resp_buffer</span><span class=\"p\">[</span><span class=\"n\">max_sdi_response</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-215\" name=\"l-215\"></a><span class=\"linenos\">215</span></div>\n<div class=\"line\"><a id=\"l-216\" name=\"l-216\"></a><span class=\"linenos\">216</span><span class=\"w\">    </span><span class=\"c1\">// read bytes into the char array until we get to a new line (\\r\\n)</span></div>\n<div class=\"line\"><a id=\"l-217\" name=\"l-217\"></a><span class=\"linenos\">217</span><span class=\"w\">    </span><span class=\"kt\">size_t</span><span class=\"w\"> </span><span class=\"n\">bytes_read</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">readBytesUntil</span><span class=\"p\">(</span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">resp_buffer</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">max_sdi_response</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-218\" name=\"l-218\"></a><span class=\"linenos\">218</span><span class=\"w\">    </span><span class=\"c1\">// Serial.print(bytes_read);</span></div>\n<div class=\"line\"><a id=\"l-219\" name=\"l-219\"></a><span class=\"linenos\">219</span><span class=\"w\">    </span><span class=\"c1\">// Serial.println(&quot; characters&quot;);</span></div>\n<div class=\"line\"><a id=\"l-220\" name=\"l-220\"></a><span class=\"linenos\">220</span></div>\n<div class=\"line\"><a id=\"l-221\" name=\"l-221\"></a><span class=\"linenos\">221</span><span class=\"w\">    </span><span class=\"kt\">size_t</span><span class=\"w\"> </span><span class=\"n\">data_bytes_read</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">bytes_read</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// subtract one for the /r before the /n</span></div>\n<div class=\"line\"><a id=\"l-222\" name=\"l-222\"></a><span class=\"linenos\">222</span><span class=\"w\">    </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">resp_buffer</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-223\" name=\"l-223\"></a><span class=\"linenos\">223</span><span class=\"w\">    </span><span class=\"n\">compiled_response</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-224\" name=\"l-224\"></a><span class=\"linenos\">224</span><span class=\"w\">    </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">trim</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-225\" name=\"l-225\"></a><span class=\"linenos\">225</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-226\" name=\"l-226\"></a><span class=\"linenos\">226</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-227\" name=\"l-227\"></a><span class=\"linenos\">227</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-228\" name=\"l-228\"></a><span class=\"linenos\">228</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(sdiResponse.length());</span></div>\n<div class=\"line\"><a id=\"l-229\" name=\"l-229\"></a><span class=\"linenos\">229</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(&quot;&lt;&lt;&lt;&quot;);</span></div>\n<div class=\"line\"><a id=\"l-230\" name=\"l-230\"></a><span class=\"linenos\">230</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(resp_buffer);</span></div>\n<div class=\"line\"><a id=\"l-231\" name=\"l-231\"></a><span class=\"linenos\">231</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(strnlen(resp_buffer, max_sdi_response));</span></div>\n<div class=\"line\"><a id=\"l-232\" name=\"l-232\"></a><span class=\"linenos\">232</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-233\" name=\"l-233\"></a><span class=\"linenos\">233</span><span class=\"w\">    </span><span class=\"c1\">// read and clear anything else from the buffer</span></div>\n<div class=\"line\"><a id=\"l-234\" name=\"l-234\"></a><span class=\"linenos\">234</span><span class=\"w\">    </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">extra_chars</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-235\" name=\"l-235\"></a><span class=\"linenos\">235</span><span class=\"w\">    </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">available</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-236\" name=\"l-236\"></a><span class=\"linenos\">236</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">read</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-237\" name=\"l-237\"></a><span class=\"linenos\">237</span><span class=\"w\">      </span><span class=\"n\">extra_chars</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-238\" name=\"l-238\"></a><span class=\"linenos\">238</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-239\" name=\"l-239\"></a><span class=\"linenos\">239</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">extra_chars</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-240\" name=\"l-240\"></a><span class=\"linenos\">240</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">extra_chars</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-241\" name=\"l-241\"></a><span class=\"linenos\">241</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot; additional characters received.&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-242\" name=\"l-242\"></a><span class=\"linenos\">242</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-243\" name=\"l-243\"></a><span class=\"linenos\">243</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-244\" name=\"l-244\"></a><span class=\"linenos\">244</span></div>\n<div class=\"line\"><a id=\"l-245\" name=\"l-245\"></a><span class=\"linenos\">245</span><span class=\"w\">    </span><span class=\"c1\">// check the crc, break if it&#39;s incorrect</span></div>\n<div class=\"line\"><a id=\"l-246\" name=\"l-246\"></a><span class=\"linenos\">246</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">verify_crc</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-247\" name=\"l-247\"></a><span class=\"linenos\">247</span><span class=\"w\">      </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">crcMatch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">verifyCRC</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-248\" name=\"l-248\"></a><span class=\"linenos\">248</span><span class=\"w\">      </span><span class=\"c1\">// subtract the 3 characters of the CRC from the total number of data values</span></div>\n<div class=\"line\"><a id=\"l-249\" name=\"l-249\"></a><span class=\"linenos\">249</span><span class=\"w\">      </span><span class=\"n\">data_bytes_read</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">data_bytes_read</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-250\" name=\"l-250\"></a><span class=\"linenos\">250</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">crcMatch</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-251\" name=\"l-251\"></a><span class=\"linenos\">251</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;CRC valid&quot;</span><span class=\"p\">);</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-252\" name=\"l-252\"></a><span class=\"linenos\">252</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-253\" name=\"l-253\"></a><span class=\"linenos\">253</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;CRC check failed!&quot;</span><span class=\"p\">);</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-254\" name=\"l-254\"></a><span class=\"linenos\">254</span><span class=\"w\">        </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">crcMatch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-255\" name=\"l-255\"></a><span class=\"linenos\">255</span><span class=\"w\">        </span><span class=\"n\">success</span><span class=\"w\">                </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-256\" name=\"l-256\"></a><span class=\"linenos\">256</span><span class=\"w\">        </span><span class=\"c1\">// if we failed CRC in the response, add one to the retry</span></div>\n<div class=\"line\"><a id=\"l-257\" name=\"l-257\"></a><span class=\"linenos\">257</span><span class=\"w\">        </span><span class=\"c1\">// attempts but do not bump up the command number or transfer any</span></div>\n<div class=\"line\"><a id=\"l-258\" name=\"l-258\"></a><span class=\"linenos\">258</span><span class=\"w\">        </span><span class=\"c1\">// results because we want to retry the same data command to try get</span></div>\n<div class=\"line\"><a id=\"l-259\" name=\"l-259\"></a><span class=\"linenos\">259</span><span class=\"w\">        </span><span class=\"c1\">// a valid response</span></div>\n<div class=\"line\"><a id=\"l-260\" name=\"l-260\"></a><span class=\"linenos\">260</span><span class=\"w\">        </span><span class=\"n\">cmd_retries</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-261\" name=\"l-261\"></a><span class=\"linenos\">261</span><span class=\"w\">        </span><span class=\"c1\">// stop processing; no reason to read the numbers when we already know</span></div>\n<div class=\"line\"><a id=\"l-262\" name=\"l-262\"></a><span class=\"linenos\">262</span><span class=\"w\">        </span><span class=\"c1\">// something&#39;s wrong</span></div>\n<div class=\"line\"><a id=\"l-263\" name=\"l-263\"></a><span class=\"linenos\">263</span><span class=\"w\">        </span><span class=\"k\">continue</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-264\" name=\"l-264\"></a><span class=\"linenos\">264</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-265\" name=\"l-265\"></a><span class=\"linenos\">265</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-266\" name=\"l-266\"></a><span class=\"linenos\">266</span></div>\n<div class=\"line\"><a id=\"l-267\" name=\"l-267\"></a><span class=\"linenos\">267</span><span class=\"w\">    </span><span class=\"c1\">// check the address, break if it&#39;s incorrect</span></div>\n<div class=\"line\"><a id=\"l-268\" name=\"l-268\"></a><span class=\"linenos\">268</span><span class=\"w\">    </span><span class=\"c1\">// NOTE: If the address is wrong because the response is garbled, the CRC check</span></div>\n<div class=\"line\"><a id=\"l-269\" name=\"l-269\"></a><span class=\"linenos\">269</span><span class=\"w\">    </span><span class=\"c1\">// above should fail. But we still verify the address in case we&#39;re not checking the</span></div>\n<div class=\"line\"><a id=\"l-270\" name=\"l-270\"></a><span class=\"linenos\">270</span><span class=\"w\">    </span><span class=\"c1\">// CRC or we got a well formed response from the wrong sensor.</span></div>\n<div class=\"line\"><a id=\"l-271\" name=\"l-271\"></a><span class=\"linenos\">271</span><span class=\"w\">    </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">resp_buffer</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-272\" name=\"l-272\"></a><span class=\"linenos\">272</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-273\" name=\"l-273\"></a><span class=\"linenos\">273</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-274\" name=\"l-274\"></a><span class=\"linenos\">274</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Wrong address returned!&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-275\" name=\"l-275\"></a><span class=\"linenos\">275</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Expected &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-276\" name=\"l-276\"></a><span class=\"linenos\">276</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-277\" name=\"l-277\"></a><span class=\"linenos\">277</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; Got &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-278\" name=\"l-278\"></a><span class=\"linenos\">278</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-279\" name=\"l-279\"></a><span class=\"linenos\">279</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">resp_buffer</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-280\" name=\"l-280\"></a><span class=\"linenos\">280</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-281\" name=\"l-281\"></a><span class=\"linenos\">281</span><span class=\"w\">      </span><span class=\"n\">success</span><span class=\"w\">                    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-282\" name=\"l-282\"></a><span class=\"linenos\">282</span><span class=\"w\">      </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">addressMatch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-283\" name=\"l-283\"></a><span class=\"linenos\">283</span><span class=\"w\">      </span><span class=\"c1\">// if we didn&#39;t get the correct address, add one to the retry</span></div>\n<div class=\"line\"><a id=\"l-284\" name=\"l-284\"></a><span class=\"linenos\">284</span><span class=\"w\">      </span><span class=\"c1\">// attempts but do not bump up the command number or transfer any</span></div>\n<div class=\"line\"><a id=\"l-285\" name=\"l-285\"></a><span class=\"linenos\">285</span><span class=\"w\">      </span><span class=\"c1\">// results because we want to retry the same data command to try get</span></div>\n<div class=\"line\"><a id=\"l-286\" name=\"l-286\"></a><span class=\"linenos\">286</span><span class=\"w\">      </span><span class=\"c1\">// a valid response</span></div>\n<div class=\"line\"><a id=\"l-287\" name=\"l-287\"></a><span class=\"linenos\">287</span><span class=\"w\">      </span><span class=\"n\">cmd_retries</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-288\" name=\"l-288\"></a><span class=\"linenos\">288</span><span class=\"w\">      </span><span class=\"c1\">// stop processing; no reason to read the numbers when we already know</span></div>\n<div class=\"line\"><a id=\"l-289\" name=\"l-289\"></a><span class=\"linenos\">289</span><span class=\"w\">      </span><span class=\"c1\">// something&#39;s wrong</span></div>\n<div class=\"line\"><a id=\"l-290\" name=\"l-290\"></a><span class=\"linenos\">290</span><span class=\"w\">      </span><span class=\"k\">continue</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-291\" name=\"l-291\"></a><span class=\"linenos\">291</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-292\" name=\"l-292\"></a><span class=\"linenos\">292</span></div>\n<div class=\"line\"><a id=\"l-293\" name=\"l-293\"></a><span class=\"linenos\">293</span><span class=\"w\">    </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">bad_read</span><span class=\"w\">                     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-294\" name=\"l-294\"></a><span class=\"linenos\">294</span><span class=\"w\">    </span><span class=\"kr\">char</span><span class=\"w\">    </span><span class=\"n\">float_buffer</span><span class=\"p\">[</span><span class=\"n\">max_sdi_digits</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-295\" name=\"l-295\"></a><span class=\"linenos\">295</span><span class=\"w\">    </span><span class=\"kr\">bool</span><span class=\"w\">    </span><span class=\"n\">got_decimal</span><span class=\"w\">                  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-296\" name=\"l-296\"></a><span class=\"linenos\">296</span><span class=\"w\">    </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\">   </span><span class=\"n\">dec_pl</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">float_buffer</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// just used for pretty printing</span></div>\n<div class=\"line\"><a id=\"l-297\" name=\"l-297\"></a><span class=\"linenos\">297</span><span class=\"w\">    </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">fb_pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\">             </span><span class=\"c1\">// start at start of buffer</span></div>\n<div class=\"line\"><a id=\"l-298\" name=\"l-298\"></a><span class=\"linenos\">298</span><span class=\"w\">    </span><span class=\"c1\">// iterate through the char array and to check results</span></div>\n<div class=\"line\"><a id=\"l-299\" name=\"l-299\"></a><span class=\"linenos\">299</span><span class=\"w\">    </span><span class=\"c1\">// NOTE: start at 1 since we already looked at the address!</span></div>\n<div class=\"line\"><a id=\"l-300\" name=\"l-300\"></a><span class=\"linenos\">300</span><span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">size_t</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">data_bytes_read</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-301\" name=\"l-301\"></a><span class=\"linenos\">301</span><span class=\"w\">      </span><span class=\"c1\">// Get the character at position</span></div>\n<div class=\"line\"><a id=\"l-302\" name=\"l-302\"></a><span class=\"linenos\">302</span><span class=\"w\">      </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">resp_buffer</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-303\" name=\"l-303\"></a><span class=\"linenos\">303</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(i);</span></div>\n<div class=\"line\"><a id=\"l-304\" name=\"l-304\"></a><span class=\"linenos\">304</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(&quot; of &quot;);</span></div>\n<div class=\"line\"><a id=\"l-305\" name=\"l-305\"></a><span class=\"linenos\">305</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(data_bytes_read);</span></div>\n<div class=\"line\"><a id=\"l-306\" name=\"l-306\"></a><span class=\"linenos\">306</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(&quot; &#39;&quot;);</span></div>\n<div class=\"line\"><a id=\"l-307\" name=\"l-307\"></a><span class=\"linenos\">307</span><span class=\"w\">      </span><span class=\"c1\">// Serial.print(c);</span></div>\n<div class=\"line\"><a id=\"l-308\" name=\"l-308\"></a><span class=\"linenos\">308</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(&quot;&#39;&quot;);</span></div>\n<div class=\"line\"><a id=\"l-309\" name=\"l-309\"></a><span class=\"linenos\">309</span><span class=\"w\">      </span><span class=\"c1\">// if we get a polarity sign (+ or -) that is not the first character after the</span></div>\n<div class=\"line\"><a id=\"l-310\" name=\"l-310\"></a><span class=\"linenos\">310</span><span class=\"w\">      </span><span class=\"c1\">// address, or we&#39;ve reached the end of the buffer, then we&#39;re at the end of the</span></div>\n<div class=\"line\"><a id=\"l-311\" name=\"l-311\"></a><span class=\"linenos\">311</span><span class=\"w\">      </span><span class=\"c1\">// previous number and can parse the float buffer</span></div>\n<div class=\"line\"><a id=\"l-312\" name=\"l-312\"></a><span class=\"linenos\">312</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">((((</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;-&#39;</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;+&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">data_bytes_read</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span></div>\n<div class=\"line\"><a id=\"l-313\" name=\"l-313\"></a><span class=\"linenos\">313</span><span class=\"w\">          </span><span class=\"n\">strnlen</span><span class=\"p\">(</span><span class=\"n\">float_buffer</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">max_sdi_digits</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-314\" name=\"l-314\"></a><span class=\"linenos\">314</span><span class=\"w\">        </span><span class=\"kr\">float</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">atof</span><span class=\"p\">(</span><span class=\"n\">float_buffer</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-315\" name=\"l-315\"></a><span class=\"linenos\">315</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-316\" name=\"l-316\"></a><span class=\"linenos\">316</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Result &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-317\" name=\"l-317\"></a><span class=\"linenos\">317</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-318\" name=\"l-318\"></a><span class=\"linenos\">318</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Raw value: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-319\" name=\"l-319\"></a><span class=\"linenos\">319</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">float_buffer</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-320\" name=\"l-320\"></a><span class=\"linenos\">320</span><span class=\"w\">          </span><span class=\"n\">dec_pl</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">strchr</span><span class=\"p\">(</span><span class=\"n\">float_buffer</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"sc\">&#39;.&#39;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-321\" name=\"l-321\"></a><span class=\"linenos\">321</span><span class=\"w\">          </span><span class=\"c1\">// NOTE: This bit below is just for pretty-printing</span></div>\n<div class=\"line\"><a id=\"l-322\" name=\"l-322\"></a><span class=\"linenos\">322</span><span class=\"w\">          </span><span class=\"kt\">size_t</span><span class=\"w\"> </span><span class=\"n\">len_post_dec</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-323\" name=\"l-323\"></a><span class=\"linenos\">323</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">dec_pl</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"k\">nullptr</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">len_post_dec</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">strnlen</span><span class=\"p\">(</span><span class=\"n\">dec_pl</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">max_sdi_digits</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-324\" name=\"l-324\"></a><span class=\"linenos\">324</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Len after decimal: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-325\" name=\"l-325\"></a><span class=\"linenos\">325</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">len_post_dec</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-326\" name=\"l-326\"></a><span class=\"linenos\">326</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Parsed value: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-327\" name=\"l-327\"></a><span class=\"linenos\">327</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">len_post_dec</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-328\" name=\"l-328\"></a><span class=\"linenos\">328</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-329\" name=\"l-329\"></a><span class=\"linenos\">329</span><span class=\"w\">        </span><span class=\"c1\">// add how many results we have</span></div>\n<div class=\"line\"><a id=\"l-330\" name=\"l-330\"></a><span class=\"linenos\">330</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"mi\">-9999</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-331\" name=\"l-331\"></a><span class=\"linenos\">331</span><span class=\"w\">          </span><span class=\"n\">gotResults</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-332\" name=\"l-332\"></a><span class=\"linenos\">332</span><span class=\"w\">          </span><span class=\"n\">resultsReceived</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-333\" name=\"l-333\"></a><span class=\"linenos\">333</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-334\" name=\"l-334\"></a><span class=\"linenos\">334</span><span class=\"w\">        </span><span class=\"c1\">// check for a failure error code at the end</span></div>\n<div class=\"line\"><a id=\"l-335\" name=\"l-335\"></a><span class=\"linenos\">335</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">error_result_number</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-336\" name=\"l-336\"></a><span class=\"linenos\">336</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">error_result_number</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">no_error_value</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-337\" name=\"l-337\"></a><span class=\"linenos\">337</span><span class=\"w\">            </span><span class=\"n\">success</span><span class=\"w\">                 </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-338\" name=\"l-338\"></a><span class=\"linenos\">338</span><span class=\"w\">            </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">errorCode</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-339\" name=\"l-339\"></a><span class=\"linenos\">339</span><span class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-340\" name=\"l-340\"></a><span class=\"linenos\">340</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Got a failure code of &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-341\" name=\"l-341\"></a><span class=\"linenos\">341</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">strnlen</span><span class=\"p\">(</span><span class=\"n\">dec_pl</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">max_sdi_digits</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-342\" name=\"l-342\"></a><span class=\"linenos\">342</span><span class=\"w\">            </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-343\" name=\"l-343\"></a><span class=\"linenos\">343</span><span class=\"w\">          </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-344\" name=\"l-344\"></a><span class=\"linenos\">344</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-345\" name=\"l-345\"></a><span class=\"linenos\">345</span><span class=\"w\">        </span><span class=\"c1\">// empty the float buffer so it&#39;s ready for the next number</span></div>\n<div class=\"line\"><a id=\"l-346\" name=\"l-346\"></a><span class=\"linenos\">346</span><span class=\"w\">        </span><span class=\"n\">float_buffer</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-347\" name=\"l-347\"></a><span class=\"linenos\">347</span><span class=\"w\">        </span><span class=\"n\">fb_pos</span><span class=\"w\">          </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-348\" name=\"l-348\"></a><span class=\"linenos\">348</span><span class=\"w\">        </span><span class=\"n\">got_decimal</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-349\" name=\"l-349\"></a><span class=\"linenos\">349</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-350\" name=\"l-350\"></a><span class=\"linenos\">350</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">data_bytes_read</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">continue</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-351\" name=\"l-351\"></a><span class=\"linenos\">351</span><span class=\"w\">      </span><span class=\"c1\">// if we&#39;re mid-number and there&#39;s a digit, a decimal, or a negative sign in the</span></div>\n<div class=\"line\"><a id=\"l-352\" name=\"l-352\"></a><span class=\"linenos\">352</span><span class=\"w\">      </span><span class=\"c1\">// sdi12 response buffer, add it to the current float buffer</span></div>\n<div class=\"line\"><a id=\"l-353\" name=\"l-353\"></a><span class=\"linenos\">353</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;-&#39;</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;0&#39;</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;9&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;.&#39;</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">!</span><span class=\"n\">got_decimal</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-354\" name=\"l-354\"></a><span class=\"linenos\">354</span><span class=\"w\">        </span><span class=\"n\">float_buffer</span><span class=\"p\">[</span><span class=\"n\">fb_pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-355\" name=\"l-355\"></a><span class=\"linenos\">355</span><span class=\"w\">        </span><span class=\"n\">fb_pos</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-356\" name=\"l-356\"></a><span class=\"linenos\">356</span><span class=\"w\">        </span><span class=\"n\">float_buffer</span><span class=\"p\">[</span><span class=\"n\">fb_pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// null terminate the buffer</span></div>\n<div class=\"line\"><a id=\"l-357\" name=\"l-357\"></a><span class=\"linenos\">357</span><span class=\"w\">        </span><span class=\"c1\">// Serial.print(&quot;Added to float buffer, currently: &#39;&quot;);</span></div>\n<div class=\"line\"><a id=\"l-358\" name=\"l-358\"></a><span class=\"linenos\">358</span><span class=\"w\">        </span><span class=\"c1\">// Serial.print(float_buffer);</span></div>\n<div class=\"line\"><a id=\"l-359\" name=\"l-359\"></a><span class=\"linenos\">359</span><span class=\"w\">        </span><span class=\"c1\">// Serial.print(&quot;&#39; (&quot;);</span></div>\n<div class=\"line\"><a id=\"l-360\" name=\"l-360\"></a><span class=\"linenos\">360</span><span class=\"w\">        </span><span class=\"c1\">// Serial.print(strnlen(float_buffer, max_sdi_digits));</span></div>\n<div class=\"line\"><a id=\"l-361\" name=\"l-361\"></a><span class=\"linenos\">361</span><span class=\"w\">        </span><span class=\"c1\">// Serial.println(&quot;)&quot;);</span></div>\n<div class=\"line\"><a id=\"l-362\" name=\"l-362\"></a><span class=\"linenos\">362</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;+&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-363\" name=\"l-363\"></a><span class=\"linenos\">363</span><span class=\"w\">        </span><span class=\"c1\">// if we get a &quot;+&quot;, it&#39;s a valid SDI-12 polarity indicator, but not something</span></div>\n<div class=\"line\"><a id=\"l-364\" name=\"l-364\"></a><span class=\"linenos\">364</span><span class=\"w\">        </span><span class=\"c1\">// accepted by atof in parsing the float, so we just ignore it</span></div>\n<div class=\"line\"><a id=\"l-365\" name=\"l-365\"></a><span class=\"linenos\">365</span><span class=\"w\">        </span><span class=\"c1\">// NOTE: A mis-read like this should also cause the CRC to be wrong, but still</span></div>\n<div class=\"line\"><a id=\"l-366\" name=\"l-366\"></a><span class=\"linenos\">366</span><span class=\"w\">        </span><span class=\"c1\">// check here in case we&#39;re not using a CRC.</span></div>\n<div class=\"line\"><a id=\"l-367\" name=\"l-367\"></a><span class=\"linenos\">367</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">  </span><span class=\"c1\">//(c != &#39;-&#39; &amp;&amp; c != &#39;+&#39; &amp;&amp; (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) &amp;&amp; c != &#39;.&#39;)</span></div>\n<div class=\"line\"><a id=\"l-368\" name=\"l-368\"></a><span class=\"linenos\">368</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Invalid data response character: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-369\" name=\"l-369\"></a><span class=\"linenos\">369</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-370\" name=\"l-370\"></a><span class=\"linenos\">370</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-371\" name=\"l-371\"></a><span class=\"linenos\">371</span><span class=\"w\">        </span><span class=\"n\">bad_read</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-372\" name=\"l-372\"></a><span class=\"linenos\">372</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-373\" name=\"l-373\"></a><span class=\"linenos\">373</span><span class=\"w\">      </span><span class=\"c1\">// if we get a decimal, mark it so we can verify we don&#39;t get repeated decimals</span></div>\n<div class=\"line\"><a id=\"l-374\" name=\"l-374\"></a><span class=\"linenos\">374</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;.&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">got_decimal</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-375\" name=\"l-375\"></a><span class=\"linenos\">375</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-376\" name=\"l-376\"></a><span class=\"linenos\">376</span></div>\n<div class=\"line\"><a id=\"l-377\" name=\"l-377\"></a><span class=\"linenos\">377</span><span class=\"w\">    </span><span class=\"c1\">// if (!gotResults) {</span></div>\n<div class=\"line\"><a id=\"l-378\" name=\"l-378\"></a><span class=\"linenos\">378</span><span class=\"w\">    </span><span class=\"c1\">//   if (printIO) {</span></div>\n<div class=\"line\"><a id=\"l-379\" name=\"l-379\"></a><span class=\"linenos\">379</span><span class=\"w\">    </span><span class=\"c1\">//     Serial.println((&quot;  No results received, will not continue requests!&quot;));</span></div>\n<div class=\"line\"><a id=\"l-380\" name=\"l-380\"></a><span class=\"linenos\">380</span><span class=\"w\">    </span><span class=\"c1\">//   }</span></div>\n<div class=\"line\"><a id=\"l-381\" name=\"l-381\"></a><span class=\"linenos\">381</span><span class=\"w\">    </span><span class=\"c1\">//   break;</span></div>\n<div class=\"line\"><a id=\"l-382\" name=\"l-382\"></a><span class=\"linenos\">382</span><span class=\"w\">    </span><span class=\"c1\">// }  // don&#39;t do another loop if we got nothing</span></div>\n<div class=\"line\"><a id=\"l-383\" name=\"l-383\"></a><span class=\"linenos\">383</span></div>\n<div class=\"line\"><a id=\"l-384\" name=\"l-384\"></a><span class=\"linenos\">384</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">gotResults</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">!</span><span class=\"n\">bad_read</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-385\" name=\"l-385\"></a><span class=\"linenos\">385</span><span class=\"w\">      </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">cmd_results</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-386\" name=\"l-386\"></a><span class=\"linenos\">386</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-387\" name=\"l-387\"></a><span class=\"linenos\">387</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;  Total Results Received: &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-388\" name=\"l-388\"></a><span class=\"linenos\">388</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-389\" name=\"l-389\"></a><span class=\"linenos\">389</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;, Remaining: &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-390\" name=\"l-390\"></a><span class=\"linenos\">390</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">resultsExpected</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-391\" name=\"l-391\"></a><span class=\"linenos\">391</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-392\" name=\"l-392\"></a><span class=\"linenos\">392</span><span class=\"w\">      </span><span class=\"n\">cmd_number</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-393\" name=\"l-393\"></a><span class=\"linenos\">393</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-394\" name=\"l-394\"></a><span class=\"linenos\">394</span><span class=\"w\">      </span><span class=\"c1\">// if we got a bad charater in the response, add one to the retry</span></div>\n<div class=\"line\"><a id=\"l-395\" name=\"l-395\"></a><span class=\"linenos\">395</span><span class=\"w\">      </span><span class=\"c1\">// attempts but do not bump up the command number or transfer any</span></div>\n<div class=\"line\"><a id=\"l-396\" name=\"l-396\"></a><span class=\"linenos\">396</span><span class=\"w\">      </span><span class=\"c1\">// results because we want to retry the same data command to try get</span></div>\n<div class=\"line\"><a id=\"l-397\" name=\"l-397\"></a><span class=\"linenos\">397</span><span class=\"w\">      </span><span class=\"c1\">// a valid response</span></div>\n<div class=\"line\"><a id=\"l-398\" name=\"l-398\"></a><span class=\"linenos\">398</span><span class=\"w\">      </span><span class=\"n\">cmd_retries</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-399\" name=\"l-399\"></a><span class=\"linenos\">399</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-400\" name=\"l-400\"></a><span class=\"linenos\">400</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-401\" name=\"l-401\"></a><span class=\"linenos\">401</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-402\" name=\"l-402\"></a><span class=\"linenos\">402</span></div>\n<div class=\"line\"><a id=\"l-403\" name=\"l-403\"></a><span class=\"linenos\">403</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-404\" name=\"l-404\"></a><span class=\"linenos\">404</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;After &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-405\" name=\"l-405\"></a><span class=\"linenos\">405</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">cmd_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-406\" name=\"l-406\"></a><span class=\"linenos\">406</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; data commands got &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-407\" name=\"l-407\"></a><span class=\"linenos\">407</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-408\" name=\"l-408\"></a><span class=\"linenos\">408</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; results of the expected &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-409\" name=\"l-409\"></a><span class=\"linenos\">409</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">resultsExpected</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-410\" name=\"l-410\"></a><span class=\"linenos\">410</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; expected. This is a &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-411\" name=\"l-411\"></a><span class=\"linenos\">411</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"w\"> </span><span class=\"s\">&quot;success.&quot;</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;failure.&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-412\" name=\"l-412\"></a><span class=\"linenos\">412</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-413\" name=\"l-413\"></a><span class=\"linenos\">413</span></div>\n<div class=\"line\"><a id=\"l-414\" name=\"l-414\"></a><span class=\"linenos\">414</span><span class=\"w\">  </span><span class=\"n\">success</span><span class=\"w\"> </span><span class=\"o\">&amp;=</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-415\" name=\"l-415\"></a><span class=\"linenos\">415</span><span class=\"w\">  </span><span class=\"n\">this_result</span><span class=\"p\">[</span><span class=\"n\">charToDec</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">compiled_response</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-416\" name=\"l-416\"></a><span class=\"linenos\">416</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">resultsReceived</span><span class=\"w\">                  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-417\" name=\"l-417\"></a><span class=\"linenos\">417</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">maxDataCommand</span><span class=\"w\">                   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-418\" name=\"l-418\"></a><span class=\"linenos\">418</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">success</span><span class=\"w\">                          </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-419\" name=\"l-419\"></a><span class=\"linenos\">419</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">return_result</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-420\" name=\"l-420\"></a><span class=\"linenos\">420</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-421\" name=\"l-421\"></a><span class=\"linenos\">421</span></div>\n<div class=\"line\"><a id=\"l-422\" name=\"l-422\"></a><span class=\"linenos\">422</span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"nf\">getContinuousResults</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-423\" name=\"l-423\"></a><span class=\"linenos\">423</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-424\" name=\"l-424\"></a><span class=\"linenos\">424</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-425\" name=\"l-425\"></a><span class=\"linenos\">425</span><span class=\"w\">  </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-426\" name=\"l-426\"></a><span class=\"linenos\">426</span><span class=\"w\">    </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-427\" name=\"l-427\"></a><span class=\"linenos\">427</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-428\" name=\"l-428\"></a><span class=\"linenos\">428</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;R&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-429\" name=\"l-429\"></a><span class=\"linenos\">429</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">cmd_number</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-430\" name=\"l-430\"></a><span class=\"linenos\">430</span><span class=\"w\">    </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;!&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// SDI-12 command to get data [address][D][dataOption][!]</span></div>\n<div class=\"line\"><a id=\"l-431\" name=\"l-431\"></a><span class=\"linenos\">431</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">sendCommand</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wake_delay</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-432\" name=\"l-432\"></a><span class=\"linenos\">432</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-433\" name=\"l-433\"></a><span class=\"linenos\">433</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&gt;&gt;&gt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-434\" name=\"l-434\"></a><span class=\"linenos\">434</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-435\" name=\"l-435\"></a><span class=\"linenos\">435</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-436\" name=\"l-436\"></a><span class=\"linenos\">436</span></div>\n<div class=\"line\"><a id=\"l-437\" name=\"l-437\"></a><span class=\"linenos\">437</span><span class=\"w\">    </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-438\" name=\"l-438\"></a><span class=\"linenos\">438</span><span class=\"w\">    </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">available</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1500</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{};</span></div>\n<div class=\"line\"><a id=\"l-439\" name=\"l-439\"></a><span class=\"linenos\">439</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-440\" name=\"l-440\"></a><span class=\"linenos\">440</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-441\" name=\"l-441\"></a><span class=\"linenos\">441</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">read</span><span class=\"p\">());</span><span class=\"w\">  </span><span class=\"c1\">// ignore the repeated SDI12 address</span></div>\n<div class=\"line\"><a id=\"l-442\" name=\"l-442\"></a><span class=\"linenos\">442</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-443\" name=\"l-443\"></a><span class=\"linenos\">443</span></div>\n<div class=\"line\"><a id=\"l-444\" name=\"l-444\"></a><span class=\"linenos\">444</span><span class=\"w\">    </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">available</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-445\" name=\"l-445\"></a><span class=\"linenos\">445</span><span class=\"w\">      </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">peek</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-446\" name=\"l-446\"></a><span class=\"linenos\">446</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;-&#39;</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;+&#39;</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;0&#39;</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"sc\">&#39;9&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"sc\">&#39;.&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-447\" name=\"l-447\"></a><span class=\"linenos\">447</span><span class=\"w\">        </span><span class=\"kr\">float</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">parseFloat</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-448\" name=\"l-448\"></a><span class=\"linenos\">448</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-449\" name=\"l-449\"></a><span class=\"linenos\">449</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"mi\">-9999</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"o\">++</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-450\" name=\"l-450\"></a><span class=\"linenos\">450</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"sc\">&#39;\\r&#39;</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-451\" name=\"l-451\"></a><span class=\"linenos\">451</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">read</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-452\" name=\"l-452\"></a><span class=\"linenos\">452</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-453\" name=\"l-453\"></a><span class=\"linenos\">453</span><span class=\"w\">        </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">read</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-454\" name=\"l-454\"></a><span class=\"linenos\">454</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-455\" name=\"l-455\"></a><span class=\"linenos\">455</span><span class=\"w\">      </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// 1 character ~ 7.5ms</span></div>\n<div class=\"line\"><a id=\"l-456\" name=\"l-456\"></a><span class=\"linenos\">456</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-457\" name=\"l-457\"></a><span class=\"linenos\">457</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-458\" name=\"l-458\"></a><span class=\"linenos\">458</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Total Results Received: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-459\" name=\"l-459\"></a><span class=\"linenos\">459</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-460\" name=\"l-460\"></a><span class=\"linenos\">460</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, Remaining: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-461\" name=\"l-461\"></a><span class=\"linenos\">461</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">resultsExpected</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-462\" name=\"l-462\"></a><span class=\"linenos\">462</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-463\" name=\"l-463\"></a><span class=\"linenos\">463</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">resultsReceived</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">break</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"c1\">// don&#39;t do another loop if we got nothing</span></div>\n<div class=\"line\"><a id=\"l-464\" name=\"l-464\"></a><span class=\"linenos\">464</span><span class=\"w\">    </span><span class=\"n\">cmd_number</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-465\" name=\"l-465\"></a><span class=\"linenos\">465</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-466\" name=\"l-466\"></a><span class=\"linenos\">466</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-467\" name=\"l-467\"></a><span class=\"linenos\">467</span></div>\n<div class=\"line\"><a id=\"l-468\" name=\"l-468\"></a><span class=\"linenos\">468</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">resultsReceived</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">resultsExpected</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-469\" name=\"l-469\"></a><span class=\"linenos\">469</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-470\" name=\"l-470\"></a><span class=\"linenos\">470</span></div>\n<div class=\"line\"><a id=\"l-471\" name=\"l-471\"></a><span class=\"linenos\">471</span><span class=\"n\">startMeasurementResult</span><span class=\"w\"> </span><span class=\"n\">startMeasurement</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">is_concurrent</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-472\" name=\"l-472\"></a><span class=\"linenos\">472</span><span class=\"w\">                                        </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">meas_type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-473\" name=\"l-473\"></a><span class=\"linenos\">473</span><span class=\"w\">                                        </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-474\" name=\"l-474\"></a><span class=\"linenos\">474</span><span class=\"w\">  </span><span class=\"c1\">// Create the return struct</span></div>\n<div class=\"line\"><a id=\"l-475\" name=\"l-475\"></a><span class=\"linenos\">475</span><span class=\"w\">  </span><span class=\"n\">startMeasurementResult</span><span class=\"w\"> </span><span class=\"n\">return_result</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-476\" name=\"l-476\"></a><span class=\"linenos\">476</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-477\" name=\"l-477\"></a><span class=\"linenos\">477</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">meas_time_s</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-478\" name=\"l-478\"></a><span class=\"linenos\">478</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-479\" name=\"l-479\"></a><span class=\"linenos\">479</span></div>\n<div class=\"line\"><a id=\"l-480\" name=\"l-480\"></a><span class=\"linenos\">480</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-481\" name=\"l-481\"></a><span class=\"linenos\">481</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">;</span><span class=\"w\">                    </span><span class=\"c1\">// All commands start with the address</span></div>\n<div class=\"line\"><a id=\"l-482\" name=\"l-482\"></a><span class=\"linenos\">482</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">is_concurrent</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"w\"> </span><span class=\"s\">&quot;C&quot;</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;M&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// C for concurrent, M for standard</span></div>\n<div class=\"line\"><a id=\"l-483\" name=\"l-483\"></a><span class=\"linenos\">483</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"w\"> </span><span class=\"s\">&quot;C&quot;</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span><span class=\"w\">     </span><span class=\"c1\">// add an additional C to request a CRC</span></div>\n<div class=\"line\"><a id=\"l-484\" name=\"l-484\"></a><span class=\"linenos\">484</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">meas_type</span><span class=\"p\">;</span><span class=\"w\">                  </span><span class=\"c1\">// Measurement type, &quot;&quot; or 0-9</span></div>\n<div class=\"line\"><a id=\"l-485\" name=\"l-485\"></a><span class=\"linenos\">485</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;!&quot;</span><span class=\"p\">;</span><span class=\"w\">                        </span><span class=\"c1\">// All commands end with &quot;!&quot;</span></div>\n<div class=\"line\"><a id=\"l-486\" name=\"l-486\"></a><span class=\"linenos\">486</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">sendCommand</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wake_delay</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-487\" name=\"l-487\"></a><span class=\"linenos\">487</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-488\" name=\"l-488\"></a><span class=\"linenos\">488</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&gt;&gt;&gt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-489\" name=\"l-489\"></a><span class=\"linenos\">489</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-490\" name=\"l-490\"></a><span class=\"linenos\">490</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-491\" name=\"l-491\"></a><span class=\"linenos\">491</span><span class=\"w\">  </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-492\" name=\"l-492\"></a><span class=\"linenos\">492</span></div>\n<div class=\"line\"><a id=\"l-493\" name=\"l-493\"></a><span class=\"linenos\">493</span><span class=\"w\">  </span><span class=\"c1\">// wait for acknowledgement with format [address][ttt (3 char, seconds)][number of</span></div>\n<div class=\"line\"><a id=\"l-494\" name=\"l-494\"></a><span class=\"linenos\">494</span><span class=\"w\">  </span><span class=\"c1\">// measurements available, 0-9]</span></div>\n<div class=\"line\"><a id=\"l-495\" name=\"l-495\"></a><span class=\"linenos\">495</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">readStringUntil</span><span class=\"p\">(</span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-496\" name=\"l-496\"></a><span class=\"linenos\">496</span><span class=\"w\">  </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">trim</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-497\" name=\"l-497\"></a><span class=\"linenos\">497</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-498\" name=\"l-498\"></a><span class=\"linenos\">498</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-499\" name=\"l-499\"></a><span class=\"linenos\">499</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-500\" name=\"l-500\"></a><span class=\"linenos\">500</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-501\" name=\"l-501\"></a><span class=\"linenos\">501</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-502\" name=\"l-502\"></a><span class=\"linenos\">502</span></div>\n<div class=\"line\"><a id=\"l-503\" name=\"l-503\"></a><span class=\"linenos\">503</span><span class=\"w\">  </span><span class=\"c1\">// check the address, return if it&#39;s incorrect</span></div>\n<div class=\"line\"><a id=\"l-504\" name=\"l-504\"></a><span class=\"linenos\">504</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">returnedAddress</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-505\" name=\"l-505\"></a><span class=\"linenos\">505</span><span class=\"w\">  </span><span class=\"kr\">char</span><span class=\"w\">   </span><span class=\"n\">ret_addr_array</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-506\" name=\"l-506\"></a><span class=\"linenos\">506</span><span class=\"w\">  </span><span class=\"n\">returnedAddress</span><span class=\"p\">.</span><span class=\"n\">toCharArray</span><span class=\"p\">(</span><span class=\"n\">ret_addr_array</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">sizeof</span><span class=\"p\">(</span><span class=\"n\">ret_addr_array</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-507\" name=\"l-507\"></a><span class=\"linenos\">507</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ret_addr_array</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-508\" name=\"l-508\"></a><span class=\"linenos\">508</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-509\" name=\"l-509\"></a><span class=\"linenos\">509</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-510\" name=\"l-510\"></a><span class=\"linenos\">510</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Wrong address returned!&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-511\" name=\"l-511\"></a><span class=\"linenos\">511</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Expected &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-512\" name=\"l-512\"></a><span class=\"linenos\">512</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-513\" name=\"l-513\"></a><span class=\"linenos\">513</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; Got &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-514\" name=\"l-514\"></a><span class=\"linenos\">514</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-515\" name=\"l-515\"></a><span class=\"linenos\">515</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-516\" name=\"l-516\"></a><span class=\"linenos\">516</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">return_result</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-517\" name=\"l-517\"></a><span class=\"linenos\">517</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-518\" name=\"l-518\"></a><span class=\"linenos\">518</span></div>\n<div class=\"line\"><a id=\"l-519\" name=\"l-519\"></a><span class=\"linenos\">519</span><span class=\"w\">  </span><span class=\"c1\">// find out how long we have to wait (in seconds).</span></div>\n<div class=\"line\"><a id=\"l-520\" name=\"l-520\"></a><span class=\"linenos\">520</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">meas_time_s</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">).</span><span class=\"n\">toInt</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-521\" name=\"l-521\"></a><span class=\"linenos\">521</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">meas_time_s</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">meas_time_s</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-522\" name=\"l-522\"></a><span class=\"linenos\">522</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-523\" name=\"l-523\"></a><span class=\"linenos\">523</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;expected measurement time: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-524\" name=\"l-524\"></a><span class=\"linenos\">524</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">meas_time_s</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-525\" name=\"l-525\"></a><span class=\"linenos\">525</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; s, &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-526\" name=\"l-526\"></a><span class=\"linenos\">526</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-527\" name=\"l-527\"></a><span class=\"linenos\">527</span></div>\n<div class=\"line\"><a id=\"l-528\" name=\"l-528\"></a><span class=\"linenos\">528</span><span class=\"w\">  </span><span class=\"c1\">// Set up the number of results to expect</span></div>\n<div class=\"line\"><a id=\"l-529\" name=\"l-529\"></a><span class=\"linenos\">529</span><span class=\"w\">  </span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">numResults</span><span class=\"w\">              </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">).</span><span class=\"n\">toInt</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-530\" name=\"l-530\"></a><span class=\"linenos\">530</span><span class=\"w\">  </span><span class=\"n\">return_result</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">numResults</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-531\" name=\"l-531\"></a><span class=\"linenos\">531</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-532\" name=\"l-532\"></a><span class=\"linenos\">532</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Number Results: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-533\" name=\"l-533\"></a><span class=\"linenos\">533</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">numResults</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-534\" name=\"l-534\"></a><span class=\"linenos\">534</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-535\" name=\"l-535\"></a><span class=\"linenos\">535</span></div>\n<div class=\"line\"><a id=\"l-536\" name=\"l-536\"></a><span class=\"linenos\">536</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">return_result</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-537\" name=\"l-537\"></a><span class=\"linenos\">537</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-538\" name=\"l-538\"></a><span class=\"linenos\">538</span></div>\n<div class=\"line\"><a id=\"l-539\" name=\"l-539\"></a><span class=\"linenos\">539</span><span class=\"c1\">// This is a separate function in this example so the wait times can all be filled into</span></div>\n<div class=\"line\"><a id=\"l-540\" name=\"l-540\"></a><span class=\"linenos\">540</span><span class=\"c1\">// the appropriate arrays</span></div>\n<div class=\"line\"><a id=\"l-541\" name=\"l-541\"></a><span class=\"linenos\">541</span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">startConcurrentMeasurement</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-542\" name=\"l-542\"></a><span class=\"linenos\">542</span><span class=\"w\">                               </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">meas_type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-543\" name=\"l-543\"></a><span class=\"linenos\">543</span><span class=\"w\">  </span><span class=\"n\">startMeasurementResult</span><span class=\"w\"> </span><span class=\"n\">startResult</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">startMeasurement</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-544\" name=\"l-544\"></a><span class=\"linenos\">544</span><span class=\"w\">                                                        </span><span class=\"n\">meas_type</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-545\" name=\"l-545\"></a><span class=\"linenos\">545</span></div>\n<div class=\"line\"><a id=\"l-546\" name=\"l-546\"></a><span class=\"linenos\">546</span><span class=\"w\">  </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">sensorNum</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">charToDec</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-547\" name=\"l-547\"></a><span class=\"linenos\">547</span><span class=\"w\">  </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kr\">uint32_t</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">meas_time_s</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1000</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-548\" name=\"l-548\"></a><span class=\"linenos\">548</span><span class=\"w\">  </span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-549\" name=\"l-549\"></a><span class=\"linenos\">549</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">meas_time_s</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-550\" name=\"l-550\"></a><span class=\"linenos\">550</span><span class=\"w\">    </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-551\" name=\"l-551\"></a><span class=\"linenos\">551</span><span class=\"w\">  </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-552\" name=\"l-552\"></a><span class=\"linenos\">552</span><span class=\"w\">    </span><span class=\"c1\">// give an extra second</span></div>\n<div class=\"line\"><a id=\"l-553\" name=\"l-553\"></a><span class=\"linenos\">553</span><span class=\"w\">    </span><span class=\"c1\">// millisReady[sensorNum] = millis() + meas_time_ms[sensorNum] + 1000;</span></div>\n<div class=\"line\"><a id=\"l-554\" name=\"l-554\"></a><span class=\"linenos\">554</span><span class=\"w\">    </span><span class=\"c1\">// subtract a second to start polling early</span></div>\n<div class=\"line\"><a id=\"l-555\" name=\"l-555\"></a><span class=\"linenos\">555</span><span class=\"w\">    </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1000</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-556\" name=\"l-556\"></a><span class=\"linenos\">556</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-557\" name=\"l-557\"></a><span class=\"linenos\">557</span><span class=\"w\">  </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">sensorNum</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-558\" name=\"l-558\"></a><span class=\"linenos\">558</span></div>\n<div class=\"line\"><a id=\"l-559\" name=\"l-559\"></a><span class=\"linenos\">559</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-560\" name=\"l-560\"></a><span class=\"linenos\">560</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-561\" name=\"l-561\"></a><span class=\"linenos\">561</span></div>\n<div class=\"line\"><a id=\"l-562\" name=\"l-562\"></a><span class=\"linenos\">562</span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">takeMeasurement</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">meas_type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-563\" name=\"l-563\"></a><span class=\"linenos\">563</span><span class=\"w\">                         </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-564\" name=\"l-564\"></a><span class=\"linenos\">564</span><span class=\"w\">  </span><span class=\"n\">startMeasurementResult</span><span class=\"w\"> </span><span class=\"n\">startResult</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">startMeasurement</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-565\" name=\"l-565\"></a><span class=\"linenos\">565</span><span class=\"w\">                                                        </span><span class=\"n\">meas_type</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-566\" name=\"l-566\"></a><span class=\"linenos\">566</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"mi\">-1</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-567\" name=\"l-567\"></a><span class=\"linenos\">567</span></div>\n<div class=\"line\"><a id=\"l-568\" name=\"l-568\"></a><span class=\"linenos\">568</span><span class=\"w\">  </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">timerStart</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-569\" name=\"l-569\"></a><span class=\"linenos\">569</span><span class=\"w\">  </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">measTime</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">-1</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-570\" name=\"l-570\"></a><span class=\"linenos\">570</span><span class=\"w\">  </span><span class=\"c1\">// wait up to 1 second longer than the specified return time</span></div>\n<div class=\"line\"><a id=\"l-571\" name=\"l-571\"></a><span class=\"linenos\">571</span><span class=\"w\">  </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">timerStart</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&lt;</span></div>\n<div class=\"line\"><a id=\"l-572\" name=\"l-572\"></a><span class=\"linenos\">572</span><span class=\"w\">         </span><span class=\"p\">(</span><span class=\"kr\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kr\">uint32_t</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">meas_time_s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1000</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-573\" name=\"l-573\"></a><span class=\"linenos\">573</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">available</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-574\" name=\"l-574\"></a><span class=\"linenos\">574</span><span class=\"w\">      </span><span class=\"k\">break</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-575\" name=\"l-575\"></a><span class=\"linenos\">575</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"c1\">// sensor can interrupt us to let us know it is done early</span></div>\n<div class=\"line\"><a id=\"l-576\" name=\"l-576\"></a><span class=\"linenos\">576</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-577\" name=\"l-577\"></a><span class=\"linenos\">577</span><span class=\"w\">  </span><span class=\"n\">measTime</span><span class=\"w\">                  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">timerStart</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-578\" name=\"l-578\"></a><span class=\"linenos\">578</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">interrupt_response</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">readStringUntil</span><span class=\"p\">(</span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-579\" name=\"l-579\"></a><span class=\"linenos\">579</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-580\" name=\"l-580\"></a><span class=\"linenos\">580</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-581\" name=\"l-581\"></a><span class=\"linenos\">581</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">interrupt_response</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-582\" name=\"l-582\"></a><span class=\"linenos\">582</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Completed after &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-583\" name=\"l-583\"></a><span class=\"linenos\">583</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">measTime</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-584\" name=\"l-584\"></a><span class=\"linenos\">584</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot; ms&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-585\" name=\"l-585\"></a><span class=\"linenos\">585</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-586\" name=\"l-586\"></a><span class=\"linenos\">586</span></div>\n<div class=\"line\"><a id=\"l-587\" name=\"l-587\"></a><span class=\"linenos\">587</span><span class=\"w\">  </span><span class=\"c1\">// if we got results, return the measurement time, else -1</span></div>\n<div class=\"line\"><a id=\"l-588\" name=\"l-588\"></a><span class=\"linenos\">588</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getResults</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">startResult</span><span class=\"p\">.</span><span class=\"n\">numberResults</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">request_crc</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"p\">).</span><span class=\"n\">success</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-589\" name=\"l-589\"></a><span class=\"linenos\">589</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">measTime</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-590\" name=\"l-590\"></a><span class=\"linenos\">590</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-591\" name=\"l-591\"></a><span class=\"linenos\">591</span></div>\n<div class=\"line\"><a id=\"l-592\" name=\"l-592\"></a><span class=\"linenos\">592</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"mi\">-1</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-593\" name=\"l-593\"></a><span class=\"linenos\">593</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-594\" name=\"l-594\"></a><span class=\"linenos\">594</span></div>\n<div class=\"line\"><a id=\"l-595\" name=\"l-595\"></a><span class=\"linenos\">595</span><span class=\"c1\">// this checks for activity at a particular address</span></div>\n<div class=\"line\"><a id=\"l-596\" name=\"l-596\"></a><span class=\"linenos\">596</span><span class=\"c1\">// expects a char, &#39;0&#39;-&#39;9&#39;, &#39;a&#39;-&#39;z&#39;, or &#39;A&#39;-&#39;Z&#39;</span></div>\n<div class=\"line\"><a id=\"l-597\" name=\"l-597\"></a><span class=\"linenos\">597</span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">checkActive</span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">numPings</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">printIO</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-598\" name=\"l-598\"></a><span class=\"linenos\">598</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-599\" name=\"l-599\"></a><span class=\"linenos\">599</span><span class=\"w\">  </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-600\" name=\"l-600\"></a><span class=\"linenos\">600</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">char</span><span class=\"p\">)</span><span class=\"n\">address</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// sends basic &#39;acknowledge&#39; command [address][!]</span></div>\n<div class=\"line\"><a id=\"l-601\" name=\"l-601\"></a><span class=\"linenos\">601</span><span class=\"w\">  </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"s\">&quot;!&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-602\" name=\"l-602\"></a><span class=\"linenos\">602</span></div>\n<div class=\"line\"><a id=\"l-603\" name=\"l-603\"></a><span class=\"linenos\">603</span><span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">numPings</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">  </span><span class=\"c1\">// goes through rapid contact attempts</span></div>\n<div class=\"line\"><a id=\"l-604\" name=\"l-604\"></a><span class=\"linenos\">604</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-605\" name=\"l-605\"></a><span class=\"linenos\">605</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&gt;&gt;&gt;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-606\" name=\"l-606\"></a><span class=\"linenos\">606</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-607\" name=\"l-607\"></a><span class=\"linenos\">607</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-608\" name=\"l-608\"></a><span class=\"linenos\">608</span><span class=\"w\">    </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">sendCommand</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wake_delay</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-609\" name=\"l-609\"></a><span class=\"linenos\">609</span><span class=\"w\">    </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">30</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-610\" name=\"l-610\"></a><span class=\"linenos\">610</span></div>\n<div class=\"line\"><a id=\"l-611\" name=\"l-611\"></a><span class=\"linenos\">611</span><span class=\"w\">    </span><span class=\"c1\">// the sensor should just return its address followed by &#39;\\r\\n&#39;</span></div>\n<div class=\"line\"><a id=\"l-612\" name=\"l-612\"></a><span class=\"linenos\">612</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">available</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-613\" name=\"l-613\"></a><span class=\"linenos\">613</span><span class=\"w\">      </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">sdiResponse_r</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">readStringUntil</span><span class=\"p\">(</span><span class=\"sc\">&#39;\\n&#39;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-614\" name=\"l-614\"></a><span class=\"linenos\">614</span><span class=\"w\">      </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse_r</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-615\" name=\"l-615\"></a><span class=\"linenos\">615</span><span class=\"w\">      </span><span class=\"n\">sdiResponse_r</span><span class=\"p\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\r</span><span class=\"s\">&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;\u2190&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-616\" name=\"l-616\"></a><span class=\"linenos\">616</span><span class=\"w\">      </span><span class=\"n\">sdiResponse_r</span><span class=\"p\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;\u2193&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-617\" name=\"l-617\"></a><span class=\"linenos\">617</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-618\" name=\"l-618\"></a><span class=\"linenos\">618</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt; &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-619\" name=\"l-619\"></a><span class=\"linenos\">619</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse_r</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-620\" name=\"l-620\"></a><span class=\"linenos\">620</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39; (&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-621\" name=\"l-621\"></a><span class=\"linenos\">621</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse_r</span><span class=\"p\">.</span><span class=\"n\">length</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-622\" name=\"l-622\"></a><span class=\"linenos\">622</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;)&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-623\" name=\"l-623\"></a><span class=\"linenos\">623</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-624\" name=\"l-624\"></a><span class=\"linenos\">624</span><span class=\"w\">      </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">trim</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-625\" name=\"l-625\"></a><span class=\"linenos\">625</span><span class=\"w\">      </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\r</span><span class=\"s\">&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;\u2190&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-626\" name=\"l-626\"></a><span class=\"linenos\">626</span><span class=\"w\">      </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;\u2193&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-627\" name=\"l-627\"></a><span class=\"linenos\">627</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-628\" name=\"l-628\"></a><span class=\"linenos\">628</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&lt;&lt;&lt; Trimmed: &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-629\" name=\"l-629\"></a><span class=\"linenos\">629</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-630\" name=\"l-630\"></a><span class=\"linenos\">630</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39; (&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-631\" name=\"l-631\"></a><span class=\"linenos\">631</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">length</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-632\" name=\"l-632\"></a><span class=\"linenos\">632</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;)&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-633\" name=\"l-633\"></a><span class=\"linenos\">633</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-634\" name=\"l-634\"></a><span class=\"linenos\">634</span><span class=\"w\">      </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-635\" name=\"l-635\"></a><span class=\"linenos\">635</span></div>\n<div class=\"line\"><a id=\"l-636\" name=\"l-636\"></a><span class=\"linenos\">636</span><span class=\"w\">      </span><span class=\"c1\">// check the address, return false if it&#39;s incorrect</span></div>\n<div class=\"line\"><a id=\"l-637\" name=\"l-637\"></a><span class=\"linenos\">637</span><span class=\"w\">      </span><span class=\"kr\">String</span><span class=\"w\"> </span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sdiResponse</span><span class=\"p\">.</span><span class=\"n\">substring</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-638\" name=\"l-638\"></a><span class=\"linenos\">638</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;returnedAddress &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-639\" name=\"l-639\"></a><span class=\"linenos\">639</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-640\" name=\"l-640\"></a><span class=\"linenos\">640</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39; (&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-641\" name=\"l-641\"></a><span class=\"linenos\">641</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">.</span><span class=\"n\">length</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-642\" name=\"l-642\"></a><span class=\"linenos\">642</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;)&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-643\" name=\"l-643\"></a><span class=\"linenos\">643</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-644\" name=\"l-644\"></a><span class=\"linenos\">644</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-645\" name=\"l-645\"></a><span class=\"linenos\">645</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Got response from &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-646\" name=\"l-646\"></a><span class=\"linenos\">646</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-647\" name=\"l-647\"></a><span class=\"linenos\">647</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-648\" name=\"l-648\"></a><span class=\"linenos\">648</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-649\" name=\"l-649\"></a><span class=\"linenos\">649</span><span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-650\" name=\"l-650\"></a><span class=\"linenos\">650</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-651\" name=\"l-651\"></a><span class=\"linenos\">651</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">printIO</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-652\" name=\"l-652\"></a><span class=\"linenos\">652</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Wrong address returned!&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-653\" name=\"l-653\"></a><span class=\"linenos\">653</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Expected &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-654\" name=\"l-654\"></a><span class=\"linenos\">654</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-655\" name=\"l-655\"></a><span class=\"linenos\">655</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39; Got &#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-656\" name=\"l-656\"></a><span class=\"linenos\">656</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">returnedAddress</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-657\" name=\"l-657\"></a><span class=\"linenos\">657</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;&#39;&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-658\" name=\"l-658\"></a><span class=\"linenos\">658</span><span class=\"w\">          </span><span class=\"c1\">// Serial.println(sdiResponse);</span></div>\n<div class=\"line\"><a id=\"l-659\" name=\"l-659\"></a><span class=\"linenos\">659</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-660\" name=\"l-660\"></a><span class=\"linenos\">660</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-661\" name=\"l-661\"></a><span class=\"linenos\">661</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-662\" name=\"l-662\"></a><span class=\"linenos\">662</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-663\" name=\"l-663\"></a><span class=\"linenos\">663</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">clearBuffer</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-664\" name=\"l-664\"></a><span class=\"linenos\">664</span><span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-665\" name=\"l-665\"></a><span class=\"linenos\">665</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-666\" name=\"l-666\"></a><span class=\"linenos\">666</span></div>\n<div class=\"line\"><a id=\"l-667\" name=\"l-667\"></a><span class=\"linenos\">667</span><span class=\"kr\">void</span><span class=\"w\"> </span><span class=\"nb\">setup</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-668\" name=\"l-668\"></a><span class=\"linenos\">668</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">begin</span><span class=\"p\">(</span><span class=\"n\">serialBaud</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-669\" name=\"l-669\"></a><span class=\"linenos\">669</span><span class=\"w\">  </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nf\">Serial</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">10000L</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-670\" name=\"l-670\"></a><span class=\"linenos\">670</span><span class=\"w\">  </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">tbuf</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"sc\">&#39;\\0&#39;</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-671\" name=\"l-671\"></a><span class=\"linenos\">671</span></div>\n<div class=\"line\"><a id=\"l-672\" name=\"l-672\"></a><span class=\"linenos\">672</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Opening SDI-12 bus on pin &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-673\" name=\"l-673\"></a><span class=\"linenos\">673</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">dataPin</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-674\" name=\"l-674\"></a><span class=\"linenos\">674</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; (&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-675\" name=\"l-675\"></a><span class=\"linenos\">675</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">itoa</span><span class=\"p\">(</span><span class=\"n\">dataPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tbuf</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-676\" name=\"l-676\"></a><span class=\"linenos\">676</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;)&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-677\" name=\"l-677\"></a><span class=\"linenos\">677</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;...&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-678\" name=\"l-678\"></a><span class=\"linenos\">678</span><span class=\"w\">  </span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"nf\">begin</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-679\" name=\"l-679\"></a><span class=\"linenos\">679</span><span class=\"w\">  </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">500</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// allow things to settle</span></div>\n<div class=\"line\"><a id=\"l-680\" name=\"l-680\"></a><span class=\"linenos\">680</span></div>\n<div class=\"line\"><a id=\"l-681\" name=\"l-681\"></a><span class=\"linenos\">681</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Timeout value: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-682\" name=\"l-682\"></a><span class=\"linenos\">682</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">mySDI12</span><span class=\"p\">.</span><span class=\"n\">TIMEOUT</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-683\" name=\"l-683\"></a><span class=\"linenos\">683</span></div>\n<div class=\"line\"><a id=\"l-684\" name=\"l-684\"></a><span class=\"linenos\">684</span><span class=\"w\">  </span><span class=\"c1\">// Fill arrays with 0&#39;s</span></div>\n<div class=\"line\"><a id=\"l-685\" name=\"l-685\"></a><span class=\"linenos\">685</span><span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-686\" name=\"l-686\"></a><span class=\"linenos\">686</span><span class=\"w\">       </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-687\" name=\"l-687\"></a><span class=\"linenos\">687</span><span class=\"w\">    </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\">           </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-688\" name=\"l-688\"></a><span class=\"linenos\">688</span><span class=\"w\">    </span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">false</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-689\" name=\"l-689\"></a><span class=\"linenos\">689</span><span class=\"w\">    </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-690\" name=\"l-690\"></a><span class=\"linenos\">690</span><span class=\"w\">    </span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-691\" name=\"l-691\"></a><span class=\"linenos\">691</span><span class=\"w\">    </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-692\" name=\"l-692\"></a><span class=\"linenos\">692</span><span class=\"w\">    </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-693\" name=\"l-693\"></a><span class=\"linenos\">693</span><span class=\"w\">    </span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-694\" name=\"l-694\"></a><span class=\"linenos\">694</span><span class=\"w\">    </span><span class=\"n\">prev_result</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-695\" name=\"l-695\"></a><span class=\"linenos\">695</span><span class=\"w\">    </span><span class=\"n\">this_result</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-696\" name=\"l-696\"></a><span class=\"linenos\">696</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-697\" name=\"l-697\"></a><span class=\"linenos\">697</span></div>\n<div class=\"line\"><a id=\"l-698\" name=\"l-698\"></a><span class=\"linenos\">698</span><span class=\"w\">  </span><span class=\"c1\">// Power the sensors;</span></div>\n<div class=\"line\"><a id=\"l-699\" name=\"l-699\"></a><span class=\"linenos\">699</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">powerPin</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-700\" name=\"l-700\"></a><span class=\"linenos\">700</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Powering up sensors with pin &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-701\" name=\"l-701\"></a><span class=\"linenos\">701</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kr\">String</span><span class=\"p\">(</span><span class=\"n\">powerPin</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-702\" name=\"l-702\"></a><span class=\"linenos\">702</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;, wait 10s...&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-703\" name=\"l-703\"></a><span class=\"linenos\">703</span><span class=\"w\">    </span><span class=\"nf\">pinMode</span><span class=\"p\">(</span><span class=\"n\">powerPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">OUTPUT</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-704\" name=\"l-704\"></a><span class=\"linenos\">704</span><span class=\"w\">    </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">powerPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">HIGH</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-705\" name=\"l-705\"></a><span class=\"linenos\">705</span><span class=\"w\">    </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mf\">10000L</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-706\" name=\"l-706\"></a><span class=\"linenos\">706</span><span class=\"w\">  </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-707\" name=\"l-707\"></a><span class=\"linenos\">707</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Wait 5s...&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-708\" name=\"l-708\"></a><span class=\"linenos\">708</span><span class=\"w\">    </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mf\">5000L</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-709\" name=\"l-709\"></a><span class=\"linenos\">709</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-710\" name=\"l-710\"></a><span class=\"linenos\">710</span></div>\n<div class=\"line\"><a id=\"l-711\" name=\"l-711\"></a><span class=\"linenos\">711</span><span class=\"w\">  </span><span class=\"c1\">// Quickly scan the address space</span></div>\n<div class=\"line\"><a id=\"l-712\" name=\"l-712\"></a><span class=\"linenos\">712</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\n\\n</span><span class=\"s\">Scanning all addresses, please wait...&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-713\" name=\"l-713\"></a><span class=\"linenos\">713</span></div>\n<div class=\"line\"><a id=\"l-714\" name=\"l-714\"></a><span class=\"linenos\">714</span><span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-715\" name=\"l-715\"></a><span class=\"linenos\">715</span><span class=\"w\">       </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-716\" name=\"l-716\"></a><span class=\"linenos\">716</span><span class=\"w\">    </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-717\" name=\"l-717\"></a><span class=\"linenos\">717</span><span class=\"w\">    </span><span class=\"kr\">char</span><span class=\"w\">   </span><span class=\"n\">address</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">decToChar</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-718\" name=\"l-718\"></a><span class=\"linenos\">718</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;i: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-719\" name=\"l-719\"></a><span class=\"linenos\">719</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-720\" name=\"l-720\"></a><span class=\"linenos\">720</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, address: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-721\" name=\"l-721\"></a><span class=\"linenos\">721</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-722\" name=\"l-722\"></a><span class=\"linenos\">722</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;, reversed: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-723\" name=\"l-723\"></a><span class=\"linenos\">723</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">charToDec</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-724\" name=\"l-724\"></a><span class=\"linenos\">724</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">checkActive</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-725\" name=\"l-725\"></a><span class=\"linenos\">725</span><span class=\"w\">      </span><span class=\"n\">numSensors</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-726\" name=\"l-726\"></a><span class=\"linenos\">726</span><span class=\"w\">      </span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-727\" name=\"l-727\"></a><span class=\"linenos\">727</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(&quot;, +&quot;);</span></div>\n<div class=\"line\"><a id=\"l-728\" name=\"l-728\"></a><span class=\"linenos\">728</span><span class=\"w\">      </span><span class=\"n\">printInfo</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-729\" name=\"l-729\"></a><span class=\"linenos\">729</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-730\" name=\"l-730\"></a><span class=\"linenos\">730</span><span class=\"w\">      </span><span class=\"c1\">// Serial.println(&quot;, -&quot;);</span></div>\n<div class=\"line\"><a id=\"l-731\" name=\"l-731\"></a><span class=\"linenos\">731</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-732\" name=\"l-732\"></a><span class=\"linenos\">732</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-733\" name=\"l-733\"></a><span class=\"linenos\">733</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Total number of sensors found:  &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-734\" name=\"l-734\"></a><span class=\"linenos\">734</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">numSensors</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-735\" name=\"l-735\"></a><span class=\"linenos\">735</span></div>\n<div class=\"line\"><a id=\"l-736\" name=\"l-736\"></a><span class=\"linenos\">736</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">numSensors</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-737\" name=\"l-737\"></a><span class=\"linenos\">737</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span></div>\n<div class=\"line\"><a id=\"l-738\" name=\"l-738\"></a><span class=\"linenos\">738</span><span class=\"w\">      </span><span class=\"s\">&quot;No sensors found, please check connections and restart the Arduino.&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-739\" name=\"l-739\"></a><span class=\"linenos\">739</span><span class=\"w\">    </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">true</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">);</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"c1\">// do nothing forever</span></div>\n<div class=\"line\"><a id=\"l-740\" name=\"l-740\"></a><span class=\"linenos\">740</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-741\" name=\"l-741\"></a><span class=\"linenos\">741</span></div>\n<div class=\"line\"><a id=\"l-742\" name=\"l-742\"></a><span class=\"linenos\">742</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-743\" name=\"l-743\"></a><span class=\"linenos\">743</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;-------------------------------------------------------------------&quot;</span></div>\n<div class=\"line\"><a id=\"l-744\" name=\"l-744\"></a><span class=\"linenos\">744</span><span class=\"w\">                 </span><span class=\"s\">&quot;------------&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-745\" name=\"l-745\"></a><span class=\"linenos\">745</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;Wait 10s...&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-746\" name=\"l-746\"></a><span class=\"linenos\">746</span><span class=\"w\">  </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"mf\">10000L</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-747\" name=\"l-747\"></a><span class=\"linenos\">747</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-748\" name=\"l-748\"></a><span class=\"linenos\">748</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;-------------------------------------------------------------------&quot;</span></div>\n<div class=\"line\"><a id=\"l-749\" name=\"l-749\"></a><span class=\"linenos\">749</span><span class=\"w\">                 </span><span class=\"s\">&quot;------------&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-750\" name=\"l-750\"></a><span class=\"linenos\">750</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-751\" name=\"l-751\"></a><span class=\"linenos\">751</span></div>\n<div class=\"line\"><a id=\"l-752\" name=\"l-752\"></a><span class=\"linenos\">752</span><span class=\"kr\">void</span><span class=\"w\"> </span><span class=\"nb\">loop</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-753\" name=\"l-753\"></a><span class=\"linenos\">753</span><span class=\"w\">  </span><span class=\"n\">flip</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">!</span><span class=\"n\">flip</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// flip the switch between concurrent and not</span></div>\n<div class=\"line\"><a id=\"l-754\" name=\"l-754\"></a><span class=\"linenos\">754</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Starting &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-755\" name=\"l-755\"></a><span class=\"linenos\">755</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">flip</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"w\"> </span><span class=\"s\">&quot;concurrent&quot;</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">&quot;individual&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-756\" name=\"l-756\"></a><span class=\"linenos\">756</span><span class=\"w\">  </span><span class=\"c1\">// flip = 1;</span></div>\n<div class=\"line\"><a id=\"l-757\" name=\"l-757\"></a><span class=\"linenos\">757</span><span class=\"w\">  </span><span class=\"c1\">// flip           = 0;</span></div>\n<div class=\"line\"><a id=\"l-758\" name=\"l-758\"></a><span class=\"linenos\">758</span><span class=\"w\">  </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-759\" name=\"l-759\"></a><span class=\"linenos\">759</span><span class=\"w\">  </span><span class=\"c1\">// Serial.print(&quot;Flip: &quot;);</span></div>\n<div class=\"line\"><a id=\"l-760\" name=\"l-760\"></a><span class=\"linenos\">760</span><span class=\"w\">  </span><span class=\"c1\">// Serial.println(flip);</span></div>\n<div class=\"line\"><a id=\"l-761\" name=\"l-761\"></a><span class=\"linenos\">761</span></div>\n<div class=\"line\"><a id=\"l-762\" name=\"l-762\"></a><span class=\"linenos\">762</span><span class=\"w\">  </span><span class=\"c1\">// Fill arrays with 0&#39;s</span></div>\n<div class=\"line\"><a id=\"l-763\" name=\"l-763\"></a><span class=\"linenos\">763</span><span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-764\" name=\"l-764\"></a><span class=\"linenos\">764</span><span class=\"w\">       </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-765\" name=\"l-765\"></a><span class=\"linenos\">765</span><span class=\"w\">    </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\">           </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-766\" name=\"l-766\"></a><span class=\"linenos\">766</span><span class=\"w\">    </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-767\" name=\"l-767\"></a><span class=\"linenos\">767</span><span class=\"w\">    </span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-768\" name=\"l-768\"></a><span class=\"linenos\">768</span><span class=\"w\">    </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-769\" name=\"l-769\"></a><span class=\"linenos\">769</span><span class=\"w\">    </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-770\" name=\"l-770\"></a><span class=\"linenos\">770</span><span class=\"w\">    </span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-771\" name=\"l-771\"></a><span class=\"linenos\">771</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-772\" name=\"l-772\"></a><span class=\"linenos\">772</span></div>\n<div class=\"line\"><a id=\"l-773\" name=\"l-773\"></a><span class=\"linenos\">773</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">flip</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-774\" name=\"l-774\"></a><span class=\"linenos\">774</span><span class=\"w\">    </span><span class=\"c1\">// measure one at a time</span></div>\n<div class=\"line\"><a id=\"l-775\" name=\"l-775\"></a><span class=\"linenos\">775</span><span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-776\" name=\"l-776\"></a><span class=\"linenos\">776</span><span class=\"w\">         </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-777\" name=\"l-777\"></a><span class=\"linenos\">777</span><span class=\"w\">      </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-778\" name=\"l-778\"></a><span class=\"linenos\">778</span><span class=\"w\">      </span><span class=\"kr\">char</span><span class=\"w\">   </span><span class=\"n\">address</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">decToChar</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-779\" name=\"l-779\"></a><span class=\"linenos\">779</span><span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-780\" name=\"l-780\"></a><span class=\"linenos\">780</span><span class=\"w\">        </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">commandsToTest</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-781\" name=\"l-781\"></a><span class=\"linenos\">781</span><span class=\"w\">          </span><span class=\"n\">takeMeasurement</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">commands</span><span class=\"p\">[</span><span class=\"n\">a</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-782\" name=\"l-782\"></a><span class=\"linenos\">782</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-783\" name=\"l-783\"></a><span class=\"linenos\">783</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-784\" name=\"l-784\"></a><span class=\"linenos\">784</span><span class=\"w\">        </span><span class=\"c1\">// getContinuousResults(address, 3);</span></div>\n<div class=\"line\"><a id=\"l-785\" name=\"l-785\"></a><span class=\"linenos\">785</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-786\" name=\"l-786\"></a><span class=\"linenos\">786</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Address &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-787\" name=\"l-787\"></a><span class=\"linenos\">787</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-788\" name=\"l-788\"></a><span class=\"linenos\">788</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot; is not active&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-789\" name=\"l-789\"></a><span class=\"linenos\">789</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-790\" name=\"l-790\"></a><span class=\"linenos\">790</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-791\" name=\"l-791\"></a><span class=\"linenos\">791</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Total Time for Individual Measurements: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-792\" name=\"l-792\"></a><span class=\"linenos\">792</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-793\" name=\"l-793\"></a><span class=\"linenos\">793</span><span class=\"w\">  </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-794\" name=\"l-794\"></a><span class=\"linenos\">794</span><span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">commandsToTest</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-795\" name=\"l-795\"></a><span class=\"linenos\">795</span><span class=\"w\">      </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">min_wait</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">60000L</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-796\" name=\"l-796\"></a><span class=\"linenos\">796</span><span class=\"w\">      </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">max_wait</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-797\" name=\"l-797\"></a><span class=\"linenos\">797</span><span class=\"w\">      </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">for_start</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-798\" name=\"l-798\"></a><span class=\"linenos\">798</span><span class=\"w\">      </span><span class=\"c1\">// start all sensors measuring concurrently</span></div>\n<div class=\"line\"><a id=\"l-799\" name=\"l-799\"></a><span class=\"linenos\">799</span><span class=\"w\">      </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-800\" name=\"l-800\"></a><span class=\"linenos\">800</span><span class=\"w\">           </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-801\" name=\"l-801\"></a><span class=\"linenos\">801</span><span class=\"w\">        </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-802\" name=\"l-802\"></a><span class=\"linenos\">802</span><span class=\"w\">        </span><span class=\"kr\">char</span><span class=\"w\">   </span><span class=\"n\">address</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">decToChar</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-803\" name=\"l-803\"></a><span class=\"linenos\">803</span><span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-804\" name=\"l-804\"></a><span class=\"linenos\">804</span><span class=\"w\">          </span><span class=\"n\">startConcurrentMeasurement</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">commands</span><span class=\"p\">[</span><span class=\"n\">a</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-805\" name=\"l-805\"></a><span class=\"linenos\">805</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">min_wait</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">min_wait</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">];</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-806\" name=\"l-806\"></a><span class=\"linenos\">806</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">max_wait</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">max_wait</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">meas_time_ms</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">];</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-807\" name=\"l-807\"></a><span class=\"linenos\">807</span><span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-808\" name=\"l-808\"></a><span class=\"linenos\">808</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Address &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-809\" name=\"l-809\"></a><span class=\"linenos\">809</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-810\" name=\"l-810\"></a><span class=\"linenos\">810</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot; is not active&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-811\" name=\"l-811\"></a><span class=\"linenos\">811</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-812\" name=\"l-812\"></a><span class=\"linenos\">812</span><span class=\"w\">      </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-813\" name=\"l-813\"></a><span class=\"linenos\">813</span><span class=\"w\">      </span><span class=\"c1\">// min_wait = 800;</span></div>\n<div class=\"line\"><a id=\"l-814\" name=\"l-814\"></a><span class=\"linenos\">814</span><span class=\"w\">      </span><span class=\"n\">min_wait</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">max</span><span class=\"p\">(</span><span class=\"kr\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kr\">uint32_t</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">min_wait</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-815\" name=\"l-815\"></a><span class=\"linenos\">815</span><span class=\"w\">      </span><span class=\"n\">max_wait</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">max</span><span class=\"p\">(</span><span class=\"kr\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kr\">uint32_t</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"mi\">1000</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-816\" name=\"l-816\"></a><span class=\"linenos\">816</span><span class=\"w\">                     </span><span class=\"n\">max_wait</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"kr\">static_cast</span><span class=\"o\">&lt;</span><span class=\"kr\">uint32_t</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"mi\">2000</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-817\" name=\"l-817\"></a><span class=\"linenos\">817</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;minimum expected wait for all sensors: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-818\" name=\"l-818\"></a><span class=\"linenos\">818</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">min_wait</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-819\" name=\"l-819\"></a><span class=\"linenos\">819</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;maximum expected wait for all sensors: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-820\" name=\"l-820\"></a><span class=\"linenos\">820</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">max_wait</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-821\" name=\"l-821\"></a><span class=\"linenos\">821</span></div>\n<div class=\"line\"><a id=\"l-822\" name=\"l-822\"></a><span class=\"linenos\">822</span><span class=\"cp\">#if defined(TEST_PRINT_ARRAY)</span></div>\n<div class=\"line\"><a id=\"l-823\" name=\"l-823\"></a><span class=\"linenos\">823</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;address_number,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-824\" name=\"l-824\"></a><span class=\"linenos\">824</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;address,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-825\" name=\"l-825\"></a><span class=\"linenos\">825</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;position,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-826\" name=\"l-826\"></a><span class=\"linenos\">826</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;isActive[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-827\" name=\"l-827\"></a><span class=\"linenos\">827</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;millis,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-828\" name=\"l-828\"></a><span class=\"linenos\">828</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;timeWaited,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-829\" name=\"l-829\"></a><span class=\"linenos\">829</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;millisReady[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-830\" name=\"l-830\"></a><span class=\"linenos\">830</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;expectedResults[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-831\" name=\"l-831\"></a><span class=\"linenos\">831</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;returnedResults[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-832\" name=\"l-832\"></a><span class=\"linenos\">832</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;millis() &gt; millisReady[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-833\" name=\"l-833\"></a><span class=\"linenos\">833</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;expectedResults[i] &gt; 0,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-834\" name=\"l-834\"></a><span class=\"linenos\">834</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;returnedResults[i] &lt; expectedResults[i],</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-835\" name=\"l-835\"></a><span class=\"linenos\">835</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;numSensors,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-836\" name=\"l-836\"></a><span class=\"linenos\">836</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;numReadingsRecorded,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-837\" name=\"l-837\"></a><span class=\"linenos\">837</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;maxDataCommand,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-838\" name=\"l-838\"></a><span class=\"linenos\">838</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;resultsReceived,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-839\" name=\"l-839\"></a><span class=\"linenos\">839</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;errorCode,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-840\" name=\"l-840\"></a><span class=\"linenos\">840</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;crcMatch,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-841\" name=\"l-841\"></a><span class=\"linenos\">841</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;gotGoodResults,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-842\" name=\"l-842\"></a><span class=\"linenos\">842</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;numReadingsRecorded&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-843\" name=\"l-843\"></a><span class=\"linenos\">843</span><span class=\"w\">      </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-844\" name=\"l-844\"></a><span class=\"linenos\">844</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-845\" name=\"l-845\"></a><span class=\"linenos\">845</span></div>\n<div class=\"line\"><a id=\"l-846\" name=\"l-846\"></a><span class=\"linenos\">846</span><span class=\"w\">      </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">numReadingsRecorded</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-847\" name=\"l-847\"></a><span class=\"linenos\">847</span><span class=\"w\">      </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"n\">min_wait</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-848\" name=\"l-848\"></a><span class=\"linenos\">848</span></div>\n<div class=\"line\"><a id=\"l-849\" name=\"l-849\"></a><span class=\"linenos\">849</span><span class=\"w\">      </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-850\" name=\"l-850\"></a><span class=\"linenos\">850</span><span class=\"w\">        </span><span class=\"c1\">// get all readings</span></div>\n<div class=\"line\"><a id=\"l-851\" name=\"l-851\"></a><span class=\"linenos\">851</span><span class=\"w\">        </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">lastAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-852\" name=\"l-852\"></a><span class=\"linenos\">852</span><span class=\"w\">             </span><span class=\"n\">address_number</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-853\" name=\"l-853\"></a><span class=\"linenos\">853</span><span class=\"w\">          </span><span class=\"kr\">int8_t</span><span class=\"w\">   </span><span class=\"n\">pos</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">address_number</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">firstAddress</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-854\" name=\"l-854\"></a><span class=\"linenos\">854</span><span class=\"w\">          </span><span class=\"kr\">uint32_t</span><span class=\"w\"> </span><span class=\"n\">timeWaited</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-855\" name=\"l-855\"></a><span class=\"linenos\">855</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">timeWaited</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">millisStarted</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">];</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-856\" name=\"l-856\"></a><span class=\"linenos\">856</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">this_result</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">prev_result</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">this_result</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">];</span><span class=\"w\"> </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-857\" name=\"l-857\"></a><span class=\"linenos\">857</span></div>\n<div class=\"line\"><a id=\"l-858\" name=\"l-858\"></a><span class=\"linenos\">858</span><span class=\"w\">          </span><span class=\"kr\">char</span><span class=\"w\"> </span><span class=\"n\">addr</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">decToChar</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-859\" name=\"l-859\"></a><span class=\"linenos\">859</span></div>\n<div class=\"line\"><a id=\"l-860\" name=\"l-860\"></a><span class=\"linenos\">860</span><span class=\"cp\">#if defined(TEST_PRINT_ARRAY)</span></div>\n<div class=\"line\"><a id=\"l-861\" name=\"l-861\"></a><span class=\"linenos\">861</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-862\" name=\"l-862\"></a><span class=\"linenos\">862</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t\\&quot;</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-863\" name=\"l-863\"></a><span class=\"linenos\">863</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">decToChar</span><span class=\"p\">(</span><span class=\"n\">address_number</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-864\" name=\"l-864\"></a><span class=\"linenos\">864</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;</span><span class=\"se\">\\&quot;</span><span class=\"s\">,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-865\" name=\"l-865\"></a><span class=\"linenos\">865</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">pos</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-866\" name=\"l-866\"></a><span class=\"linenos\">866</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t\\&quot;</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-867\" name=\"l-867\"></a><span class=\"linenos\">867</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-868\" name=\"l-868\"></a><span class=\"linenos\">868</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-869\" name=\"l-869\"></a><span class=\"linenos\">869</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">());</span></div>\n<div class=\"line\"><a id=\"l-870\" name=\"l-870\"></a><span class=\"linenos\">870</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-871\" name=\"l-871\"></a><span class=\"linenos\">871</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">timeWaited</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-872\" name=\"l-872\"></a><span class=\"linenos\">872</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-873\" name=\"l-873\"></a><span class=\"linenos\">873</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-874\" name=\"l-874\"></a><span class=\"linenos\">874</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-875\" name=\"l-875\"></a><span class=\"linenos\">875</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-876\" name=\"l-876\"></a><span class=\"linenos\">876</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-877\" name=\"l-877\"></a><span class=\"linenos\">877</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-878\" name=\"l-878\"></a><span class=\"linenos\">878</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-879\" name=\"l-879\"></a><span class=\"linenos\">879</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-880\" name=\"l-880\"></a><span class=\"linenos\">880</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-881\" name=\"l-881\"></a><span class=\"linenos\">881</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-882\" name=\"l-882\"></a><span class=\"linenos\">882</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-883\" name=\"l-883\"></a><span class=\"linenos\">883</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-884\" name=\"l-884\"></a><span class=\"linenos\">884</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-885\" name=\"l-885\"></a><span class=\"linenos\">885</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">numSensors</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-886\" name=\"l-886\"></a><span class=\"linenos\">886</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-887\" name=\"l-887\"></a><span class=\"linenos\">887</span><span class=\"w\">          </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">numReadingsRecorded</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-888\" name=\"l-888\"></a><span class=\"linenos\">888</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-889\" name=\"l-889\"></a><span class=\"linenos\">889</span></div>\n<div class=\"line\"><a id=\"l-890\" name=\"l-890\"></a><span class=\"linenos\">890</span><span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">isActive</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">millisReady</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span></div>\n<div class=\"line\"><a id=\"l-891\" name=\"l-891\"></a><span class=\"linenos\">891</span><span class=\"w\">              </span><span class=\"p\">(</span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span></div>\n<div class=\"line\"><a id=\"l-892\" name=\"l-892\"></a><span class=\"linenos\">892</span><span class=\"w\">              </span><span class=\"p\">(</span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]))</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-893\" name=\"l-893\"></a><span class=\"linenos\">893</span><span class=\"cp\">#ifndef TEST_PRINT_ARRAY</span></div>\n<div class=\"line\"><a id=\"l-894\" name=\"l-894\"></a><span class=\"linenos\">894</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;timeWaited: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-895\" name=\"l-895\"></a><span class=\"linenos\">895</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">timeWaited</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-896\" name=\"l-896\"></a><span class=\"linenos\">896</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-897\" name=\"l-897\"></a><span class=\"linenos\">897</span><span class=\"w\">            </span><span class=\"n\">getResultsResult</span><span class=\"w\"> </span><span class=\"n\">cResult</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">getResults</span><span class=\"p\">(</span><span class=\"n\">addr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">expectedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"kr\">true</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-898\" name=\"l-898\"></a><span class=\"linenos\">898</span><span class=\"w\">            </span><span class=\"n\">returnedResults</span><span class=\"p\">[</span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">resultsReceived</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-899\" name=\"l-899\"></a><span class=\"linenos\">899</span><span class=\"w\">            </span><span class=\"kr\">bool</span><span class=\"w\"> </span><span class=\"n\">gotGoodResults</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">success</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-900\" name=\"l-900\"></a><span class=\"linenos\">900</span><span class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">gotGoodResults</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-901\" name=\"l-901\"></a><span class=\"linenos\">901</span><span class=\"w\">              </span><span class=\"n\">numReadingsRecorded</span><span class=\"o\">++</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-902\" name=\"l-902\"></a><span class=\"linenos\">902</span><span class=\"cp\">#ifndef TEST_PRINT_ARRAY</span></div>\n<div class=\"line\"><a id=\"l-903\" name=\"l-903\"></a><span class=\"linenos\">903</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Got results from &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-904\" name=\"l-904\"></a><span class=\"linenos\">904</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">numReadingsRecorded</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-905\" name=\"l-905\"></a><span class=\"linenos\">905</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; of &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-906\" name=\"l-906\"></a><span class=\"linenos\">906</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">numSensors</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-907\" name=\"l-907\"></a><span class=\"linenos\">907</span><span class=\"w\">              </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot; sensors&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-908\" name=\"l-908\"></a><span class=\"linenos\">908</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-909\" name=\"l-909\"></a><span class=\"linenos\">909</span><span class=\"w\">            </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-910\" name=\"l-910\"></a><span class=\"linenos\">910</span><span class=\"cp\">#if defined(TEST_PRINT_ARRAY)</span></div>\n<div class=\"line\"><a id=\"l-911\" name=\"l-911\"></a><span class=\"linenos\">911</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-912\" name=\"l-912\"></a><span class=\"linenos\">912</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">maxDataCommand</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-913\" name=\"l-913\"></a><span class=\"linenos\">913</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-914\" name=\"l-914\"></a><span class=\"linenos\">914</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">resultsReceived</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-915\" name=\"l-915\"></a><span class=\"linenos\">915</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-916\" name=\"l-916\"></a><span class=\"linenos\">916</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">errorCode</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-917\" name=\"l-917\"></a><span class=\"linenos\">917</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-918\" name=\"l-918\"></a><span class=\"linenos\">918</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">cResult</span><span class=\"p\">.</span><span class=\"n\">crcMatch</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-919\" name=\"l-919\"></a><span class=\"linenos\">919</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;,</span><span class=\"se\">\\t</span><span class=\"s\">&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-920\" name=\"l-920\"></a><span class=\"linenos\">920</span><span class=\"w\">            </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">gotGoodResults</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-921\" name=\"l-921\"></a><span class=\"linenos\">921</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-922\" name=\"l-922\"></a><span class=\"linenos\">922</span><span class=\"w\">          </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-923\" name=\"l-923\"></a><span class=\"linenos\">923</span><span class=\"w\">        </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-924\" name=\"l-924\"></a><span class=\"linenos\">924</span></div>\n<div class=\"line\"><a id=\"l-925\" name=\"l-925\"></a><span class=\"linenos\">925</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">for_start</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">max_wait</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">numReadingsRecorded</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">numSensors</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-926\" name=\"l-926\"></a><span class=\"linenos\">926</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-927\" name=\"l-927\"></a><span class=\"linenos\">927</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">&quot;Total Time for Concurrent Measurements: &quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-928\" name=\"l-928\"></a><span class=\"linenos\">928</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"nf\">millis</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-929\" name=\"l-929\"></a><span class=\"linenos\">929</span><span class=\"w\">  </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-930\" name=\"l-930\"></a><span class=\"linenos\">930</span></div>\n<div class=\"line\"><a id=\"l-931\" name=\"l-931\"></a><span class=\"linenos\">931</span><span class=\"w\">  </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"s\">&quot;-------------------------------------------------------------------&quot;</span></div>\n<div class=\"line\"><a id=\"l-932\" name=\"l-932\"></a><span class=\"linenos\">932</span><span class=\"w\">                 </span><span class=\"s\">&quot;------------&quot;</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-933\" name=\"l-933\"></a><span class=\"linenos\">933</span><span class=\"p\">}</span>\n</div></div></div>",
    "sections": "",
    "deprecated": null,
    "since": null,
    "example_navigation": null,
    "footer_navigation": [
      [
        "_test_sensor_timing_8ino-example.html",
        "TestSensorTiming.ino"
      ],
      [
        "examples_page.html",
        "Examples using the SDI-12 Library"
      ],
      null
    ],
    "topics": [],
    "dirs": [],
    "files": [],
    "namespaces": [],
    "classes": [],
    "base_classes": [],
    "derived_classes": [],
    "enums": [],
    "typedefs": [],
    "funcs": [],
    "vars": [],
    "defines": [],
    "public_types": [],
    "public_static_funcs": [],
    "typeless_funcs": [],
    "public_funcs": [],
    "signals": [],
    "public_slots": [],
    "public_static_vars": [],
    "public_vars": [],
    "protected_types": [],
    "protected_static_funcs": [],
    "protected_funcs": [],
    "protected_slots": [],
    "protected_static_vars": [],
    "protected_vars": [],
    "private_funcs": [],
    "private_slots": [],
    "related": [],
    "friend_funcs": [],
    "groups": [],
    "has_enum_details": false,
    "has_typedef_details": false,
    "has_func_details": false,
    "has_var_details": false,
    "has_define_details": false,
    "breadcrumb": [
      [
        "Examples using the SDI-12 Library",
        "examples_page.html"
      ],
      [
        "TestCommands.ino",
        "_test_commands_8ino-example.html"
      ]
    ]
  }
}