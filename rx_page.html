<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <title>Creating a Character - Stepping through the Rx ISR | SDI-12 for Arduino2.1.4</title>
  <link rel="stylesheet" href="m-EnviroDIY+documentation.compiled.css" />

<style id="wp-emoji-styles-inline-css" type="text/css">
  img.wp-smiley,
  img.emoji {
    display: inline !important;
    border: none !important;
    box-shadow: none !important;
    height: 1em !important;
    width: 1em !important;
    margin: 0 0.07em !important;
    vertical-align: -0.1em !important;
    background: none !important;
    padding: 0 !important;
  }
</style>
<link
  rel="stylesheet"
  id="gp-parent-style-css"
  href="https://www.envirodiy.org/wp-content/themes/socialize/style.css?ver=6.5.4"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="redux-extendify-styles-css"
  href="https://www.envirodiy.org/wp-content/themes/socialize/lib/framework/redux/assets/css/extendify-utilities.css?ver=4.4.11"
  type="text/css"
  media="all"
/>
<style id="ghostpool-style-inline-css" type="text/css">
  #gp-main-header {
    min-height: 80px;
  }
  .gp-desktop-scrolling #gp-main-header {
    min-height: 80px;
  }
  .gp-header-standard #gp-logo {
    padding: 19px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-logo {
    padding: 12.5px 0;
  }
  .gp-header-standard #gp-primary-main-nav .menu > li > a {
    padding: 30.5px 0;
  }
  .gp-header-standard #gp-cart-button,
  .gp-header-standard #gp-search-button,
  .gp-header-standard #gp-profile-button {
    padding: 31px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-primary-main-nav .menu > li > a {
    padding: 30.5px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-cart-button,
  .gp-desktop-scrolling.gp-header-standard #gp-search-button,
  .gp-desktop-scrolling.gp-header-standard #gp-profile-button {
    padding: 31px 0;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li:hover > a {
    color: #fff;
  }
  .gp-theme li:hover .gp-primary-dropdown-icon {
    color: #fff;
  }
  .gp-theme .sub-menu li:hover .gp-secondary-dropdown-icon {
    color: #fff;
  }
  .gp-header-centered #gp-cart-button,
  .gp-header-centered #gp-search-button,
  .gp-header-centered #gp-profile-button {
    line-height: 18px;
  }
  .gp-header-standard #gp-secondary-main-nav .menu > li > a {
    padding: 31.5px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-secondary-main-nav .menu > li > a {
    padding: 31.5px 0;
  }
  .gp-header-centered #gp-secondary-main-nav .menu > li > a {
    line-height: 16px;
  }
  .gp-active {
    color: #000;
  }
  .gp-theme .widget.buddypress div.item-options a.selected:hover {
    color: #0579bd !important;
  }
  .gp-theme #buddypress .activity-list .activity-content blockquote a {
    color: #0579bd;
  }
  .gp-theme #buddypress .activity-list .activity-content blockquote a:hover {
    color: #000;
  }
  @media only screen and (max-width: 1082px) {
    .gp-header-standard #gp-primary-main-nav .menu > li > a {
      padding: 30.5px 0;
    }
    .gp-desktop-scrolling.gp-header-standard #gp-primary-main-nav .menu > li > a {
      padding: 30.5px 0;
    }
    .gp-header-standard #gp-cart-button,
    .gp-header-standard #gp-search-button,
    .gp-header-standard #gp-profile-button {
      padding: 31px 0;
    }
    .gp-desktop-scrolling.gp-header-standard #gp-cart-button,
    .gp-desktop-scrolling.gp-header-standard #gp-search-button,
    .gp-desktop-scrolling.gp-header-standard #gp-profile-button {
      padding: 31px 0;
    }
    .gp-header-standard #gp-secondary-main-nav .menu > li > a {
      padding: 31.5px 0;
    }
    .gp-desktop-scrolling.gp-header-standard #gp-secondary-main-nav .menu > li > a {
      padding: 31.5px 0;
    }
  }
  @media only screen and (max-width: 1023px) {
    .gp-responsive #gp-main-header {
      min-height: 80px;
    }
    .gp-responsive #gp-logo {
      padding: 26px 0;
    }
    .gp-responsive #gp-mobile-nav-button,
    .gp-responsive #gp-cart-button,
    .gp-responsive #gp-search-button,
    .gp-responsive #gp-profile-button {
      padding: 31px 0;
    }
  }
</style>
<link
  rel="stylesheet"
  id="fontawesome-css"
  href="https://www.envirodiy.org/wp-content/themes/socialize/lib/fonts/font-awesome/css/font-awesome.min.css?ver=6.5.4"
  type="text/css"
  media="all"
/>
<link
  rel="preload"
  as="style"
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500%7CRoboto%20Slab:400&#038;subset=latin&#038;display=swap&#038;ver=6.5.4"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500%7CRoboto%20Slab:400&#038;subset=latin&#038;display=swap&#038;ver=6.5.4"
  media="print"
  onload="this.media='all'"
/>
<noscript
  ><link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500%7CRoboto%20Slab:400&#038;subset=latin&#038;display=swap&#038;ver=6.5.4"
/></noscript>

<style type="text/css" id="wp-custom-css">
  /* Print Styles */
  @media print {
    @page {
      margin: 10mm 0;
    }
    body {
      background: white;
      color: black;
      background-image: none;
      margin: 0 !important;
      padding: 0;
    }

    body:not(.gp-full-page-page-header) .gp-page-header.gp-has-text:before,
    body:not(.gp-full-page-page-header)
      .gp-page-header.gp-has-teaser-video.gp-has-text
      .gp-video-header:before {
      background-image: none !important;
    }
    /* End print styles */

    #gp-main-header,
    #gp-small-header,
    #gp-header-area,
    #gp-footer,
    #gp-sidebar-right,
    #swrc-post-navigation,
    .hkb-subheader,
    .hkb-feedback,
    .hkb-mainpage__sidebar,
    .print-page {
      display: none;
    }
    .hkb-mainpage-wrapper {
      padding: 0 !important;
      background-image: none !important;
    }
    a#gp-to-top,
    span#toTopHover {
      display: none;
    }
    a[href]:after {
      content: ' (' attr(href) ')';
    }
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: 1.25em;
      page-break-after: avoid;
      page-break-inside: avoid;
    }
    .hkb-article__content h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: 1.25em;
      page-break-after: avoid;
      page-break-inside: avoid;
    }
    table {
      page-break-before: avoid;
      page-break-inside: avoid;
      page-break-after: avoid;
    }
    img {
      page-break-inside: avoid;
      visibility: visible;
      float: none;
    }
    blockquote,
    table,
    pre {
      page-break-inside: avoid;
    }
    ul,
    ol,
    dl {
      page-break-before: avoid;
    }
  }

  /*Gutenberg styles*/
  /*Buttons*/
  a.wp-block-button__link {
    background-color: #538122;
    border-radius: 5px;
    text-decoration: none !important;
  }
  .wp-block-button__link:hover {
    background: #365516 !important;
    color: #ffffff !important;
  }
  figcaption {
    font-style: italic;
  }
  /*End Gutenberg styles*/
  #gp-content a,
  .gp-sidebar a {
    font-weight: 400;
    text-decoration: underline;
  }
  /*BuddyPress styles*/
  /*Make activity feed content darker*/
  #buddypress .activity-list .activity-content .activity-inner p {
    color: #000000;
  }
  /*Hide activity filter on activity page*/
  #activity-filter-select.last {
    display: none !important;
  }
  /*Hide disabled BuddyPress status updates on profile page, activity page*/
  #latest-update {
    display: none;
  }
  .item-title .update {
    display: none;
  }
  /*Prevent display of comment/favorite links in activity stream. Because the comments do not get applied to posts or forum topics, they just confuse users*/
  .gp-theme #buddypress .activity-list div.activity-meta a.button,
  .gp-theme #buddypress .activity .acomment-options a,
  .gp-theme #buddypress .activity-list li.load-newest a,
  .widget.buddypress div.item-options a.selected {
    color: #26a9e0;
    display: none;
  }
  /*End BuddyPress styles*/
  /* Style print link */
  .pdfprnt-buttons > a > span {
    margin: 15px 0;
    padding-left: 0;
    text-decoration: underline;
  }
  /*Change caption text color and size*/
  .wp-caption-text {
    color: #333;
    font-size: 14px;
  }
  /*Collapse table borders */
  #gp-content table {
    border-collapse: collapse;
  }
  /*Add borders to Tableizer tables */
  .tableizer table,
  th,
  td {
    border: 1px solid #333;
  }
  /*Nested list styles*/
  #gp-content,
  .hkb-article ol ol li {
    list-style-type: lower-alpha;
  }
  #gp-content,
  .hkb-article ol ol ol li {
    list-style-type: lower-roman;
  }
  #gp-content,
  .hkb-article ul ul li {
    list-style-type: circle !important;
  }
  /* Add border */
  tr:last-child td {
    border-width: 1px;
  }
  /*bbPress*/
  /* Make forum title and description larger, remove link underlining */
  div.bbp-forum-content {
    font-size: 22px;
    line-height: 28px;
  }
  div.bbp-forum-content p {
    font-size: 16px;
    line-height: 22px;
  }
  #bbpress-forums a.bbp-forum-title {
    text-decoration: none;
  }
  .widgettitle {
    border-bottom: 3px solid #92d050 !important;
  }
  .bbp-author-name {
    font-size: 14px;
  }
  /*End bbpress styles*/
  #gp-copyright-text,
  #gp-copyright-text a:link,
  #gp-copyright-text a:visited {
    color: #fff;
    font-weight: 400;
  }
  /*WooCommerce styles*/
  bdi {
    color: #538122;
    font-weight: 500;
  }
  a.button.product_type_simple {
    display: none;
  }
  p.stock.out-of-stock {
    color: red;
    font-weight: 500;
  }
  .products li * {
    text-decoration: none !important;
  }
  div.gp-entry-cats {
    color: #333333;
  }
  span.woocommerce-Price-amount.amount {
    text-decoration: none !important;
  }
  /* Hide additional information tab */
  div.woocommerce-tabs {
    display: none !important;
  }
  /*End WooCommerce styles*/
  /*The Events Calendar*/
  #tribe-events-content a {
    color: #0579bd;
  }
  #tribe-events-content .wp-block-button__link {
    color: #ffffff;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget {
    background-color: #fff;
    padding: 15px;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > header {
    text-transform: uppercase;
    color: #000;
    border-bottom: 3px solid #92d050;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > header
    > h3 {
    font-family: Roboto !important;
    font-size: 14px !important;
    font-weight: 500;
    padding-bottom: 11px;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > div.tribe-events-widget-events-list__view-more.tribe-common-b1.tribe-common-b2--min-medium
    > a {
    color: #26a9e0;
  }
  /*Hero Knowledge Base styles*/
  #hkb .hkb-fullwcontainer {
    max-width: var(--hkb-main-container-width);
    margin: 0 auto;
    padding: 20px 20px;
    left: 0 !important;
    right: 0 !important;
  }
  h1.hkb-article__title {
    font-weight: 300 !important;
    margin: 0 0 0.5em !important;
  }
  .hkb-categoryheader__title {
    font-weight: 300 !important;
    font-size: 40px !important;
  }
  .hkb-articlepreview__title a {
    font-weight: 300 !important;
    font-size: 28px !important;
    text-decoration: underline !important;
    color: #0579bd !important;
    font-size: 28px !important;
  }
  #hkb a {
    text-decoration: underline;
    font-weight: 400;
  }
  a.hkb_widget_exit__btn {
    background-color: #538122 !important;
    border-radius: 5px;
    text-decoration: none !important;
  }
  a.hkb_widget_exit__btn:hover {
    background: #365516 !important;
    color: #ffffff !important;
  }
  /* End Heroic KB styles */
  #swrc-post-navigation a {
    font-size: small;
  }
  p.last-updated {
    font-size: 12px;
    font-style: italic;
  }
  aside#gp-sidebar-right.gp-sidebar p.last-updated {
    display: none;
  }
  #gp-content p.last-updated {
    display: none;
  }
  #gp-content ul {
    margin: 0 0 0 20px !important;
  }
</style>
<style id="socialize-dynamic-css" title="dynamic-css" class="redux-options-output">
  #footer-image img {
    margin-top: 10px;
    margin-right: 0px;
    margin-bottom: 10px;
    margin-left: 0px;
  }
  body {
    background-color: #f1f1f1;
  }
  body:not(.gp-full-page-page-header) #gp-page-wrapper,
  body:not(.gp-full-page-page-header) #gp-small-header .gp-container,
  .gp-homepage .widgettitle.gp-fancy-title:before {
    background-color: #e8e8e8;
  }
  body:not(.gp-full-page-page-header) #gp-small-header .gp-left-triangle {
    border-left-color: #e8e8e8;
  }
  body:not(.gp-full-page-page-header) #gp-small-header .gp-right-triangle {
    border-bottom-color: #e8e8e8;
  }
  #gp-content {
    background-color: #ffffff;
  }
  body {
    font-family: Roboto, 'Arial Black', Gadget, sans-serif;
    line-height: 28px;
    font-weight: 300;
    font-style: normal;
    color: #000;
    font-size: 16px;
  }
  a {
    color: #0579bd;
  }
  a:hover {
    color: #000;
  }
  h1 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 40px;
    font-weight: 400;
    font-style: normal;
    font-size: 36px;
  }
  h2 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 32px;
    font-weight: 400;
    font-style: normal;
    font-size: 28px;
  }
  h3,
  #tab-description h2,
  .woocommerce #comments h2,
  .woocommerce #reviews h3,
  .woocommerce .related h2,
  .woocommerce-checkout .woocommerce h2,
  .woocommerce-checkout .woocommerce h3 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 28px;
    font-weight: 400;
    font-style: normal;
    font-size: 24px;
  }
  h4 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 30px;
    font-weight: 400;
    font-style: normal;
    font-size: 20px;
  }
  h5 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 26px;
    font-weight: 400;
    font-style: normal;
    font-size: 18px;
  }
  h6 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 24px;
    font-weight: 400;
    font-style: normal;
    font-size: 16px;
  }
  .gp-entry-meta .gp-post-meta-row-1,
  .gp-homepage #gp-content .gp-vc-element-3,
  .gp-homepage #gp-content .gp-vc-element-4,
  .gp-homepage #gp-content .gp-vc-element-5,
  .gp-homepage #gp-content .gp-vc-element-6,
  #comments .commentlist li .comment_container,
  .gp-loop-divider:before,
  .gp-recent-comments ul li,
  .gp-search {
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
  }
  .gp-entry-video-wrapper .gp-entry-meta .gp-post-meta-row-1,
  .gp-footer-widget .gp-recent-comments ul li {
    border-top: 1px solid #50504b;
    border-bottom: 1px solid #50504b;
  }
  #gp-main-header {
    background-color: #222222;
  }
  .gp-desktop-scrolling #gp-main-header {
    background-color: #222222;
  }
  #gp-primary-main-nav .menu > li,
  #gp-primary-main-nav .menu > li > a {
    font-family: Roboto;
    text-transform: none;
    line-height: 16px;
    font-weight: 400;
    font-style: normal;
    color: #ababab;
    font-size: 16px;
  }
  #gp-primary-main-nav .menu > li:hover > a,
  #gp-primary-main-nav .menu > li > a {
    color: #fff;
  }
  #gp-primary-main-nav .menu > li:hover > a:hover,
  #gp-primary-main-nav .menu > li > a:hover {
    color: #fff;
  }
  #gp-primary-main-nav .menu > li > a:hover,
  #gp-primary-main-nav .menu > li:hover > a {
    border-top: 3px solid #fff;
  }
  #gp-secondary-main-nav .menu > li,
  #gp-secondary-main-nav .menu > li > a {
    font-family: Roboto;
    text-transform: none;
    line-height: 14px;
    font-weight: 400;
    font-style: normal;
    color: #fff;
    font-size: 14px;
  }
  #gp-secondary-main-nav .menu > li:hover > a,
  #gp-secondary-main-nav .menu > li > a {
    color: #fff;
  }
  #gp-secondary-main-nav .menu > li:hover > a:hover,
  #gp-secondary-main-nav .menu > li > a:hover {
    color: #fff;
  }
  #gp-secondary-main-nav .menu > li > a:hover,
  #gp-secondary-main-nav .menu > li:hover > a {
    border-top: 3px solid #fff;
  }
  #gp-search-button,
  #gp-cart-button {
    color: #fff;
  }
  #gp-search-button:hover,
  #gp-cart-button:hover {
    color: #fff;
  }
  .gp-nav .sub-menu,
  .gp-nav .menu li .gp-menu-tabs li:hover,
  .gp-nav .menu li .gp-menu-tabs li.gp-selected,
  #gp-search-box {
    background-color: #fff;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a:hover,
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li:hover > a {
    background-color: #353535;
  }
  .gp-nav .gp-standard-menu .sub-menu li,
  .gp-nav .gp-standard-menu .sub-menu li a,
  .gp-nav li.gp-megamenu .sub-menu li,
  .gp-nav .gp-megamenu .sub-menu li a {
    font-family: Roboto;
    font-weight: 400;
    font-style: normal;
    color: #000;
    font-size: 14px;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a {
    color: #000;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a:hover {
    color: #fff;
  }
  .gp-nav .sub-menu li,
  #gp-dropdowncart .total,
  #gp-dropdowncart .buttons {
    border-top: 1px solid #e0e0e0;
  }
  .gp-nav .gp-megamenu > .sub-menu > li > a,
  .gp-nav .gp-megamenu > .sub-menu > li > span {
    color: #000000;
  }
  .gp-nav li.gp-megamenu a {
    color: #000;
  }
  .gp-nav li.gp-megamenu a:hover {
    color: #e93100;
  }
  .gp-primary-dropdown-icon {
    color: #fff;
  }
  .gp-primary-dropdown-icon:hover {
    color: #fff;
  }
  .gp-secondary-dropdown-icon {
    color: #000;
  }
  .gp-secondary-dropdown-icon:hover {
    color: #fff;
  }
  .gp-menu-tabs {
    background-color: #353535;
  }
  .gp-nav .menu li .gp-menu-tabs li {
    color: #ffffff;
  }
  .gp-nav .menu li .gp-menu-tabs li:hover,
  .gp-nav .menu li .gp-menu-tabs li.gp-selected {
    color: #e93100;
  }
  #gp-small-header #gp-top-nav {
    background-color: #26a9e0;
  }
  #gp-small-header .menu > li,
  #gp-small-header .menu > li > a {
    color: #ffffff;
  }
  #gp-small-header .menu > li:hover,
  #gp-small-header .menu > li > a:hover {
    color: #e0e0e0;
  }
  #gp-mobile-nav-button,
  #gp-profile-button,
  #gp-mobile-nav-close-button {
    color: #ffffff;
  }
  #gp-mobile-nav {
    background-color: #fff;
  }
  #gp-mobile-nav-close-button {
    background-color: #0579bd;
  }
  #gp-mobile-nav li {
    color: #000000;
  }
  #gp-mobile-nav .menu li span,
  #gp-mobile-nav .menu li a {
    color: #000;
  }
  #gp-mobile-nav .menu li span:hover,
  #gp-mobile-nav .menu li a:hover {
    color: #000;
  }
  #gp-mobile-nav li a:hover {
    background-color: #f1f1f1;
  }
  #gp-mobile-nav li {
    border-top: 1px solid #e0e0e0;
  }
  #gp-mobile-nav .gp-megamenu > .sub-menu > li > a {
    color: #000000;
  }
  .gp-large-page-header .gp-page-header,
  .gp-fullwidth-page-header .gp-page-header,
  #gp-full-page-bg {
    background-color: #353535;
    background-repeat: no-repeat;
    background-attachment: scroll;
    background-position: center center;
    background-size: cover;
  }
  .gp-page-header h1,
  .gp-page-header h2 {
    font-family: Roboto;
    line-height: 90px;
    font-weight: normal;
    font-style: normal;
    color: #fff;
    font-size: 80px;
  }
  .gp-page-header .gp-container {
    height: 250px;
  }
  .gp-entry-title,
  .woocommerce .page-title,
  .woocommerce div.product .entry-title.product_title {
    font-family: Roboto;
    line-height: 46px;
    font-weight: 300;
    font-style: normal;
    color: #000;
    font-size: 40px;
  }
  .gp-subtitle {
    font-family: Roboto;
    line-height: 32px;
    font-weight: 300;
    font-style: normal;
    color: #0579bd;
    font-size: 20px;
  }
  #gp-post-links a,
  .gp-pagination-arrows a.prev,
  .gp-pagination-arrows a.next,
  .gp-carousel-wrapper .flex-direction-nav a {
    color: #aaa;
  }
  #gp-post-links a:hover,
  .gp-pagination-arrows a.prev:hover,
  .gp-pagination-arrows a.next:hover,
  .gp-carousel-wrapper .flex-direction-nav a:hover {
    color: #333;
  }
  .gp-entry-meta,
  .gp-meta-comments a {
    color: #aaaaaa;
  }
  .gp-entry-cats,
  .gp-entry-cats a,
  .gp-entry-cats a:hover {
    color: #ffffff;
  }
  .gp-entry-cats {
    background-color: #92d050;
  }
  .gp-entry-tags a,
  .gp-entry-tags a:hover {
    color: #ffffff;
  }
  .gp-entry-tags a {
    background-color: #353535;
  }
  .gp-author-info,
  #gp-post-navigation #gp-share-icons {
    background-color: #353535;
  }
  .gp-author-info,
  .gp-author-info a,
  #gp-post-navigation #gp-share-icons h3 {
    line-height: 24px;
    color: #fff;
    font-size: 14px;
  }
  .gp-author-info a {
    color: #b1b1b1;
  }
  .gp-author-info a:hover {
    color: #fff;
  }
  .gp-entry-video-wrapper {
    background-color: #353535;
  }
  .gp-entry-video-wrapper .gp-entry-title {
    color: #ffffff;
  }
  .gp-entry-video-wrapper .gp-video-description {
    color: #777777;
  }
  blockquote {
    background-color: #0579bd;
  }
  blockquote,
  blockquote a,
  blockquote a:hover {
    font-family: 'Roboto Slab';
    line-height: 38px;
    font-weight: 400;
    font-style: normal;
    color: #fff;
    font-size: 24px;
  }
  .gp-loop-title {
    line-height: 22px;
    font-weight: 400;
    font-size: 19px;
  }
  .gp-blog-large .gp-loop-title {
    line-height: 46px;
    font-weight: 200;
    font-size: 40px;
  }
  .gp-loop-title a,
  .bboss_search_item .entry-title a {
    color: #000;
  }
  .gp-loop-title a:hover,
  .bboss_search_item .entry-title a:hover {
    color: #0579bd;
  }
  .gp-loop-text,
  .gp-login-wrapper p {
    color: #545454;
  }
  .gp-loop-meta,
  .gp-loop-meta a,
  #gp-breadcrumbs,
  #gp-breadcrumbs a,
  .woocommerce .woocommerce-breadcrumb a,
  .woocommerce .woocommerce-breadcrumb,
  .comment-text time,
  div.bbp-breadcrumb,
  div.bbp-breadcrumb a,
  .gp-statistics-wrapper .gp-stat-title,
  .widget_display_replies ul li div,
  .widget_display_topics ul li div {
    color: #545454;
  }
  .gp-loop-cats,
  .gp-loop-cats a,
  .gp-loop-cats a:hover {
    color: #545454;
  }
  .gp-loop-tags,
  .gp-loop-tags a,
  .gp-loop-tags a:hover {
    color: #0579bd;
  }
  .gp-blog-masonry section,
  section.sticky {
    background-color: #f8f8f8;
  }
  ul.page-numbers .page-numbers {
    background-color: #538122;
  }
  ul.page-numbers .page-numbers:hover,
  ul.page-numbers .page-numbers.current,
  ul.page-numbers > span.page-numbers {
    background-color: #353535;
  }
  ul.page-numbers .page-numbers {
    color: #ffffff;
  }
  .widgettitle,
  .widget-title,
  .wp-block-search__label {
    font-family: Roboto;
    line-height: 18px;
    font-weight: 500;
    font-style: normal;
    color: #000;
    font-size: 14px;
  }
  .widgettitle a,
  .widget-title a,
  .wp-block-search__label {
    color: #0579bd;
  }
  .widgettitle a:hover,
  .widget-title a:hover,
  .wp-block-search__label:hover {
    color: #000;
  }
  .gp-sidebar .widgettitle,
  .widgettitle.gp-standard-title,
  .gp-sidebar .widget-title,
  .gp-sidebar .wp-block-search__label {
    border-bottom: 3px solid #538122;
  }
  .widget,
  .gp-vc-element,
  .widgettitle.gp-fancy-title .gp-widget-title,
  .widgettitle.gp-fancy-title .gp-element-icon,
  .widget .woocommerce {
    background-color: #ffffff;
  }
  .widgettitle.gp-fancy-title .gp-triangle {
    border-left-color: #ffffff;
  }
  input,
  textarea,
  .gp-search-bar,
  .wp-block-search__input,
  .gp-theme #buddypress .dir-search input[type='search'],
  .gp-theme #buddypress .dir-search input[type='text'],
  .gp-theme #buddypress .groups-members-search input[type='search'],
  .gp-theme #buddypress .standard-form input[type='color'],
  .gp-theme #buddypress .standard-form input[type='date'],
  .gp-theme #buddypress .standard-form input[type='datetime-local'],
  .gp-theme #buddypress .standard-form input[type='datetime'],
  .gp-theme #buddypress .standard-form input[type='email'],
  .gp-theme #buddypress .standard-form input[type='month'],
  .gp-theme #buddypress .standard-form input[type='number'],
  .gp-theme #buddypress .standard-form input[type='password'],
  .gp-theme #buddypress .standard-form input[type='range'],
  .gp-theme #buddypress .standard-form input[type='search'],
  .gp-theme #buddypress .standard-form input[type='tel'],
  .gp-theme #buddypress .standard-form input[type='text'],
  .gp-theme #buddypress .standard-form input[type='time'],
  .gp-theme #buddypress .standard-form input[type='url'],
  .gp-theme #buddypress .standard-form input[type='week'],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .gp-theme #buddypress form#whats-new-form textarea {
    background-color: #fafafa;
  }
  input,
  textarea,
  .gp-search-bar,
  .wp-block-search__input,
  .gp-login-wrapper .gp-login-icon,
  .gp-login-wrapper .gp-password-icon,
  .gp-login-wrapper .gp-email-icon,
  .gp-theme #buddypress .dir-search input[type='search'],
  .gp-theme #buddypress .dir-search input[type='text'],
  .gp-theme #buddypress .groups-members-search input[type='search'],
  .gp-theme #buddypress .standard-form input[type='color'],
  .gp-theme #buddypress .standard-form input[type='date'],
  .gp-theme #buddypress .standard-form input[type='datetime-local'],
  .gp-theme #buddypress .standard-form input[type='datetime'],
  .gp-theme #buddypress .standard-form input[type='email'],
  .gp-theme #buddypress .standard-form input[type='month'],
  .gp-theme #buddypress .standard-form input[type='number'],
  .gp-theme #buddypress .standard-form input[type='password'],
  .gp-theme #buddypress .standard-form input[type='range'],
  .gp-theme #buddypress .standard-form input[type='search'],
  .gp-theme #buddypress .standard-form input[type='tel'],
  .gp-theme #buddypress .standard-form input[type='text'],
  .gp-theme #buddypress .standard-form input[type='time'],
  .gp-theme #buddypress .standard-form input[type='url'],
  .gp-theme #buddypress .standard-form input[type='week'],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .bb-global-search-ac.ui-autocomplete {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
  }
  input,
  textarea,
  .gp-search-bar,
  .wp-block-search__input,
  .gp-theme #buddypress .dir-search input[type='search'],
  .gp-theme #buddypress .dir-search input[type='text'],
  .gp-theme #buddypress .groups-members-search input[type='search'],
  .gp-theme #buddypress .groups-members-search input[type='text'],
  .gp-theme #buddypress .standard-form input[type='color'],
  .gp-theme #buddypress .standard-form input[type='date'],
  .gp-theme #buddypress .standard-form input[type='datetime-local'],
  .gp-theme #buddypress .standard-form input[type='datetime'],
  .gp-theme #buddypress .standard-form input[type='email'],
  .gp-theme #buddypress .standard-form input[type='month'],
  .gp-theme #buddypress .standard-form input[type='number'],
  .gp-theme #buddypress .standard-form input[type='password'],
  .gp-theme #buddypress .standard-form input[type='range'],
  .gp-theme #buddypress .standard-form input[type='search'],
  .gp-theme #buddypress .standard-form input[type='tel'],
  .gp-theme #buddypress .standard-form input[type='text'],
  .gp-theme #buddypress .standard-form input[type='time'],
  .gp-theme #buddypress .standard-form input[type='url'],
  .gp-theme #buddypress .standard-form input[type='week'],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .gp-theme #buddypress form#whats-new-form textarea {
    color: #000000;
  }
  select,
  .gp-theme #buddypress .standard-form select,
  .gp-theme #buddypress form#whats-new-form #whats-new-options select,
  #buddypress .standard-form select:focus {
    background-color: #353535;
  }
  select,
  .gp-theme #buddypress .standard-form select,
  .gp-theme #buddypress form#whats-new-form #whats-new-options select {
    color: #ffffff;
  }
  input[type='button'],
  input[type='submit'],
  input[type='reset'],
  button,
  .button,
  .wp-block-search__button,
  .gp-theme #buddypress .comment-reply-link,
  .gp-notification-counter,
  #gp-cart-counter,
  .gp-theme #buddypress a.button,
  .gp-theme #buddypress button,
  .gp-theme #buddypress div.generic-button a,
  .gp-theme #buddypress input[type='button'],
  .gp-theme #buddypress input[type='reset'],
  .gp-theme #buddypress input[type='submit'],
  .gp-theme #buddypress ul.button-nav li a,
  a.bp-title-button,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  .tribe-events-calendar thead th,
  #tribe-events .tribe-events-button,
  #tribe-events .tribe-events-button:hover,
  #tribe_events_filters_wrapper input[type='submit'],
  .tribe-events-button,
  .tribe-events-button.tribe-active:hover,
  .tribe-events-button.tribe-inactive,
  .tribe-events-button:hover,
  .tribe-events-calendar td.tribe-events-present div[id*='tribe-events-daynum-'],
  .tribe-events-calendar td.tribe-events-present div[id*='tribe-events-daynum-'] > a,
  #tribe-bar-form .tribe-bar-submit input[type='submit'],
  .woocommerce #respond input#submit.alt,
  .woocommerce a.button.alt,
  .woocommerce button.button.alt,
  .woocommerce input.button.alt,
  #gp-dropdowncart .woocommerce a.button {
    background-color: #0579bd;
  }
  input[type='button']:hover,
  input[type='submit']:hover,
  input[type='reset']:hover,
  button:hover,
  .button:hover,
  .wp-block-search__button:hover,
  .gp-theme #buddypress .comment-reply-link:hover,
  .gp-theme #buddypress a.button:hover,
  .gp-theme #buddypress button:hover,
  .gp-theme #buddypress div.generic-button a:hover,
  .gp-theme #buddypress input[type='button']:hover,
  .gp-theme #buddypress input[type='reset']:hover,
  .gp-theme #buddypress input[type='submit']:hover,
  .gp-theme #buddypress ul.button-nav li a:hover,
  a.bp-title-button:hover,
  .gp-theme #buddypress .activity-list #reply-title small a:hover span,
  .gp-theme #buddypress .activity-list a.bp-primary-action:hover span,
  .woocommerce #respond input#submit.alt:hover,
  .woocommerce a.button.alt:hover,
  .woocommerce button.button.alt:hover,
  .woocommerce input.button.alt:hover,
  #gp-dropdowncart .woocommerce a.button:hover {
    background-color: #353535;
  }
  input[type='button'],
  input[type='submit'],
  input[type='reset'],
  button,
  .button,
  .wp-block-search__button,
  a.gp-notification-counter,
  a.gp-notification-counter:hover,
  #gp-cart-counter:hover,
  .gp-theme #buddypress .comment-reply-link,
  .gp-theme #buddypress a.button,
  .gp-theme #buddypress button,
  .gp-theme #buddypress div.generic-button a,
  .gp-theme #buddypress input[type='button'],
  .gp-theme #buddypress input[type='reset'],
  .gp-theme #buddypress input[type='submit'],
  .gp-theme #buddypress ul.button-nav li a,
  a.bp-title-button,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  #gp-dropdowncart .woocommerce a.button {
    color: #ffffff;
  }
  input[type='button']:hover,
  input[type='submit']:hover,
  input[type='reset']:hover,
  button,
  .button:hover,
  .wp-block-search__button:hover,
  .gp-theme #buddypress .comment-reply-link:hover,
  .gp-theme #buddypress a.button:hover,
  .gp-theme #buddypress button:hover,
  .gp-theme #buddypress div.generic-button a:hover,
  .gp-theme #buddypress input[type='button']:hover,
  .gp-theme #buddypress input[type='reset']:hover,
  .gp-theme #buddypress input[type='submit']:hover,
  .gp-theme #buddypress ul.button-nav li a:hover,
  a.bp-title-button:hover,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  #gp-dropdowncart .woocommerce a.button:hover {
    color: #ffffff;
  }
  #gp-footer {
    background-color: #353535;
  }
  .gp-footer-widget .widgettitle,
  .gp-footer-widget .widget-title,
  .gp-footer-widget .wp-block-search__label {
    font-family: Roboto;
    line-height: 20px;
    font-weight: 300;
    font-style: normal;
    color: #fff;
    font-size: 16px;
  }
  .gp-footer-widget {
    font-family: Roboto;
    line-height: 20px;
    font-weight: 300;
    font-style: normal;
    color: #ffffff;
    font-size: 14px;
  }
  .gp-footer-widget a {
    color: #f9bd16;
  }
  .gp-footer-widget a:hover {
    color: #b1b1b1;
  }
  #gp-copyright {
    background-color: #353535;
  }
  #gp-copyright {
    border-top: 1px solid #444;
  }
  #gp-copyright {
    color: #777777;
  }
  #gp-copyright a {
    color: #999;
  }
  #gp-copyright a:hover {
    color: #e0e0e0;
  }
  #gp-to-top {
    background-color: #0579bd;
  }
  #gp-to-top {
    color: #ffffff;
  }
</style>
  <link rel="icon" href="SDI-12Text-Cropped.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#cb4b16" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="clipboard.js"></script>
</head>

<body
    class="theme-socialize page-template-socialize-child gp-theme gp-responsive gp-wide-layout gp-retina gp-normal-scrolling gp-no-back-to-top gp-relative-header gp-header-standard gp-cart-disabled gp-search-all gp-profile-disabled gp-small-header-all gp-standard-page-header gp-no-sidebar"
>
	<div id="gp-site-wrapper">

  <nav id="gp-mobile-nav">
    <div id="gp-mobile-nav-close-button"></div>
    <ul class="menu">
      <li
        class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
      >
<a href="class_s_d_i12.html" class="menu-link main-menu-link">SDI12</a>        <ul class="sub-menu menu-odd menu-depth-1">
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#constructor-destructor-begins-and-setters">Constructor, Destructor, Begins, and Setters</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#waking-up-and-talking-to-sensors">Waking Up and Talking To Sensors</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#reading-from-the-sdi-12-buffer">Reading from the SDI-12 Buffer</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#data-line-states">Data Line States</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#using-more-than-one-sdi-12-object">Using more than one SDI-12 Object</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="class_s_d_i12.html#interrupt-service-routine">Interrupt Service Routine</a>          </li>
        </ul>
      </li>
      <li
        class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
      >
<a href="examples_page.html" class="menu-link main-menu-link">Examples</a>        <ul class="sub-menu menu-odd menu-depth-1">
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="a_wild_card_8ino-example.html">Getting Sensor Information</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="b_address_change_8ino-example.html">Address Change</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="c_check_all_addresses_8ino-example.html">Checking all Addresses</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="d_simple_logger_8ino-example.html">Logging Data</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="e_simple_parsing_8ino-example.html">Parsing Data</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="f_basic_data_request_8ino-example.html">Simple Data Request</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="g_terminal_window_8ino-example.html">Terminal Emulator 1</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="h__s_d_i-12_slave_implementation_8ino-example.html">Slave Implementation</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="i__s_d_i-12_interface_8ino-example.html">Terminal Emulator 2</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="j_external_pcint_library_8ino-example.html">External Interrupts</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a href="k_concurrent_logger_8ino-example.html">Concurrent Measurements</a>          </li>
        </ul>
      </li>
      <li
        class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page"
      >
<a href="annotated.html" class="menu-link main-menu-link">Classes</a>      </li>
      <li
        class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
      >
<a href="pages.html" class="menu-link main-menu-link">Notes</a>        <ul class="sub-menu menu-odd menu-depth-1">
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a class="menu-link sub-menu-link" href="specifications.html">Notes on SDI-12, Specification v1.4</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a class="menu-link sub-menu-link" href="interrupts_page.html">Overview of Interrupts</a>          </li>
          <li
            class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
          >
<a class="menu-link sub-menu-link" href="rx_page.html">Creating a Character - Stepping through the Rx ISR</a>          </li>
        </ul>
      </li>
    </ul>
  </nav> <!-- gp-mobile-nav -->
  <div id="gp-mobile-nav-bg"></div>

  <div id="gp-page-wrapper">

    <header id="gp-main-header">
      <div class="gp-container">
        <div id="gp-logo">
          <a href="index.html" title="SDI-12 for Arduino 2.1.4">
            <img
              src="SDI-12Text.png"
              alt="SDI-12 for Arduino 2.1.4"
              width="200"
              height="42"
              class="gp-desktop-logo"
            />
            <img
              src="SDI-12Text.png"
              alt="SDI-12 for Arduino 2.1.4"
              width="264"
              height="55"
              class="gp-scrolling-logo"
            />
            <img
              src="SDI-12Text.png"
              alt="SDI-12 for Arduino 2.1.4"
              width="132"
              height="28"
              class="gp-mobile-logo"
            />
          </a>
        </div> <!-- gp-logo -->

        <a id="gp-mobile-nav-button"></a>

        <nav id="gp-main-nav" class="gp-nav">
          <nav id="gp-primary-main-nav">
            <ul id="menu-main-menu-1" class="menu">
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
              >
<a href="class_s_d_i12.html" class="menu-link main-menu-link" >SDI12</a>                <ul class="sub-menu menu-odd menu-depth-1">
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#constructor-destructor-begins-and-setters">Constructor, Destructor, Begins, and Setters</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#waking-up-and-talking-to-sensors">Waking Up and Talking To Sensors</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#reading-from-the-sdi-12-buffer">Reading from the SDI-12 Buffer</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#data-line-states">Data Line States</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#using-more-than-one-sdi-12-object">Using more than one SDI-12 Object</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="class_s_d_i12.html#interrupt-service-routine">Interrupt Service Routine</a>                  </li>
                </ul>
              </li>
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
              >
<a href="examples_page.html" class="menu-link main-menu-link" >Examples</a>                <ul class="sub-menu menu-odd menu-depth-1">
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="a_wild_card_8ino-example.html">Getting Sensor Information</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="b_address_change_8ino-example.html">Address Change</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="c_check_all_addresses_8ino-example.html">Checking all Addresses</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="d_simple_logger_8ino-example.html">Logging Data</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="e_simple_parsing_8ino-example.html">Parsing Data</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="f_basic_data_request_8ino-example.html">Simple Data Request</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="g_terminal_window_8ino-example.html">Terminal Emulator 1</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="h__s_d_i-12_slave_implementation_8ino-example.html">Slave Implementation</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="i__s_d_i-12_interface_8ino-example.html">Terminal Emulator 2</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="j_external_pcint_library_8ino-example.html">External Interrupts</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a href="k_concurrent_logger_8ino-example.html">Concurrent Measurements</a>                  </li>
                </ul>
              </li>
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page"
              >
<a href="annotated.html"class="menu-link main-menu-link">Classes</a>              </li>
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children"
              >
<a href="pages.html" class="menu-link main-menu-link" >Notes</a>                <ul class="sub-menu menu-odd menu-depth-1">
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a class="menu-link sub-menu-link" href="specifications.html">Notes on SDI-12, Specification v1.4</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a class="menu-link sub-menu-link" href="interrupts_page.html">Overview of Interrupts</a>                  </li>
                  <li
                    class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-type-post_type menu-item-object-page"
                  >
<a class="menu-link sub-menu-link" href="rx_page.html">Creating a Character - Stepping through the Rx ISR</a>                  </li>
                </ul>
              </li>
            </ul>
          </nav> <!-- gp-primary-main-nav -->

          <div id="gp-search">
            <div id="m-search-button" class="m-show-m" onclick="return showSearch()">
            </div> <!-- gp-search-box -->
          </div> <!-- gp-search -->

          <nav id="gp-secondary-main-nav"></nav>
        </nav> <!-- gp-main-nav -->
      </div> <!-- gp-container -->
    </header> <!-- gp-main-header -->

    <header id="gp-small-header">
      <div class="gp-container">
        <div class="gp-left-triangle"></div>
        <div class="gp-right-triangle"></div>

        <nav id="gp-top-nav" class="gp-nav">
          <div id="gp-left-top-nav">
            <p style="color:#fff">An Arduino library for SDI-12 communication without requiring any additional hardware.</p>
          </div>

          <div id="gp-right-top-nav">
            <ul id="menu-icon-links" class="menu">
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 fa fa-github menu-item menu-item-type-custom menu-item-object-custom"
              >
                <a
                  title="See it on GitHub"
                  href="https://github.com/EnviroDIY/Arduino-SDI-12"
                  class="menu-link main-menu-link"
                  >See the source code on GitHub</a
                >
              </li>
            </ul>
          </div>

        </nav>
      </div>
    </header> <!-- gp-small-header -->

    <div id="gp-fixed-header-padding"></div>

    <div class="m-doc-search" id="search">
      <a href="#!" onclick="return hideSearch()"></a>
      <div id="gp-header-area">
        <div class="gp-container">
          <div style="background-color:#fff;padding:20px;">
            <div class="m-doc-search-header m-text m-small">
              <div><span class="m-label m-info">Tab</span> / <span class="m-label m-info">T</span> to search, <span class="m-label m-info">Esc</span> to close</div>
              <div id="search-symbolcount">&hellip;</div>
            </div>
            <div class="m-doc-search-content">
              <form>
                <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
              </form>
              <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
              <div id="search-help" class="m-text m-dim m-text-center">
                <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
              </div>
              <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
              <ul id="search-results"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="search-v2.js"></script>
    <script src="searchdata-v2.js" async="async"></script>

    <div class="gp-clear"></div>

    <div id="gp-content-wrapper" class="gp-container">
      <div id="gp-inner-container">
        <div id="gp-left-column">
          <div id="gp-content">

            <main>
              <article>
                <div class="breadcrumbs" typeof="BreadcrumbList" vocab="http://schema.org/">
          <span class="m-breadcrumb">
            <a href="index.html">
              SDI-12 for Arduino
            </a>  &gt; <wbr/>
          </span>
          <span class="m-breadcrumb">
            <a href="pages.html">
              Pages
            </a>  &gt; <wbr/>
          </span>
                    <span class="m-breadcrumb">
            Creating a Character - Stepping through the Rx ISR
          </span>
                </div>
                <header class="gp-entry-header">
                  <h1 class="gp-entry-title" itemprop="headline">
          Creating a Character - Stepping through the Rx ISR

                </h1>
                </header>
        <nav class="m-block m-default">
          <ul>
            <li><a href="#rx_specs">How a Character Looks in SDI-12</a></li>
            <li><a href="#rx_vars">Static Variables we Need</a></li>
            <li>
              <a href="#rx_mask">Following the Mask</a>
              <ul>
                <li><a href="#rx_mask_wait">Waiting for a Start Bit</a></li>
                <li><a href="#rx_mask_start">The Start of a Character</a></li>
                <li><a href="#rx_mask_fire">The Interrupt Fires!</a></li>
                <li>
                  <a href="#rx_mask_bit">Bit by Bit</a>
                  <ul>
                    <li><a href="#rx_mask_low">A LOW/1 Bit</a></li>
                    <li><a href="#rx_mask_high">A HIGH/0 Bit</a></li>
                    <li><a href="#rx_mask_shift">Shifting Up</a></li>
                  </ul>
                </li>
                <li><a href="#rx_mask_fin">A Finished Character</a></li>
              </ul>
            </li>
            <li><a href="#rx_fxn">The Full Interrupt Function</a></li>
          </ul>
        </nav>
<p>Here we&#x27;ll walk step-by-step through how the SDI-12 library (and NeoSWSerial) create a character from the ISR. Unlike SoftwareSerial which listens for a start bit and then halts all program and other ISR execution until the end of the character, this library grabs the time of the interrupt, does some quick math, and lets the processor move on. The logic of creating a character this way is harder for a person to follow, but it pays off because we&#x27;re not tieing up the processor in an ISR that lasts for 8.33ms for each character. [10 bits @ 1200 bits/s] For a person, that 8.33ms is trivial, but for even a &quot;slow&quot; 8MHz processor, that&#x27;s over 60,000 ticks sitting idle per character.</p><p>So, let&#x27;s look at what&#x27;s happening.</p><section id="rx_specs"><h2>How a Character Looks in SDI-12</h2><p>First we need to keep in mind the specifications of SDI-12:</p><ul><li>We use <em>inverse logic</em> that means a &quot;1&quot; bit is at LOW level and a &quot;0&quot; bit is HIGH level.</li><li>characters are sent as 10 bits<ul><li>1 start bit, which is always a 0/HIGH</li><li>7 data bits</li><li>1 parity bit</li><li>1 stop bit, which is always 1/LOW</li></ul></li></ul></section><section id="rx_vars"><h2>Static Variables we Need</h2><p>And lets remind ourselves of the static variables we&#x27;re using to store states:</p><ul><li><code>prevBitTCNT</code> stores the time of the previous RX transition in micros</li><li><code>rxState</code> tracks how many bits are accounted for on an incoming character.<ul><li>if 0: indicates that we got a start bit</li><li>if &gt;0: indicates the number of bits received</li></ul></li><li><code>WAITING-FOR-START-BIT</code> is a mask for the rxState while waiting for a start bit, it&#x27;s set to 0b11111111</li><li><code>rxMask</code> is a bit mask for building a received character<ul><li>The mask has a single bit set, in the place of the active bit based on the rxState</li></ul></li><li><code>rxValue</code> is the value of the character being built</li></ul></section><section id="rx_mask"><h2>Following the Mask</h2><section id="rx_mask_wait"><h3>Waiting for a Start Bit</h3><p>The <code>rxState</code>, <code>rxMask</code>, and <code>rxValue</code> all work together to form a character. When we&#x27;re waiting for a start bit <code>rxValue</code> is empty, <code>rxMask</code> has only the bottom bit set, and <code>rxState</code> is set to WAITING-FOR-START-BIT:</p><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|-----------------------------------</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span>
</div></div></div></section><section id="rx_mask_start"><h3>The Start of a Character</h3><p>After we get a start bit, the <code>startChar()</code> function creates a blank slate for the new character, so our values are:</p><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|-----------------------------------</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div></div></div></section><section id="rx_mask_fire"><h3>The Interrupt Fires!</h3><p>When an interrupts is received, we use capture the time if the interrupt in <code>thisBitTCNT</code>. Then we subtract <code>prevBitTCNT</code> from <code>thisBitTCNT</code> and use the <code>bitTimes()</code> function to calculate how many bit-times have passed between this interrupt and the previous one. (There&#x27;s also a fudge factor in this calculation we call the <a href="https://github.com/SlashDevin/NeoSWSerial/pull/13#issuecomment-315463522">rxWindowWidth</a>.)</p></section><section id="rx_mask_bit"><h3>Bit by Bit</h3><p>For <strong>each bit time that passed</strong>, we apply the <code>rxMask</code> to the <code>rxValue</code>.</p><ul><li>Keep in mind multiple bit times can pass between interrupts - this happens any time there are two (or more) high or low bits in a row.</li><li>We also leave time for the (high) start and (low) stop bit, but do anything with the <code>rxState</code>, <code>rxMask</code>, or <code>rxValue</code> for those bits.</li></ul><section id="rx_mask_low"><h4>A LOW/1 Bit</h4><ul><li>if the data bit received is LOW (1) we do an <code>|=</code> (bitwise OR) between the <code>rxMask</code> and the <code>rxValue</code></li></ul><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|---------------------------------^-</span><span class="w"> </span><span class="n">bit</span><span class="o">-</span><span class="n">wise</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">puts</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">one</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span><span class="w">      </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rxMask</span><span class="w"> </span><span class="n">into</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">      </span><span class="n">the</span><span class="w"> </span><span class="n">rxValue</span>
</div></div></div></section><section id="rx_mask_high"><h4>A HIGH/0 Bit</h4><ul><li>if the data bit received is HIGH (0) we do nothing</li></ul><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|---------------------------------</span><span class="n">x</span><span class="o">-</span><span class="w"> </span><span class="n">nothing</span><span class="w"> </span><span class="n">happens</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div></div></div></section><section id="rx_mask_shift"><h4>Shifting Up</h4><ul><li><em>After</em> applying the mask, we push everything over one bit to the left. The top bit falls off.<ul><li>we always add a 1 on the <code>rxState</code>, to indicate the bit arrived</li><li>we always add a 0 on the <code>rxMask</code> and the <code>rxValue</code></li><li>the values of the second bit of the <code>rxValue</code> (?) depends on what we did in the step above</li></ul></li></ul><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">        </span><span class="o">&lt;---</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;---</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">zero</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|-------------------|---------------------------|---</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">        </span><span class="o">&lt;---</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;---</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">zero</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">0</span><span class="w">        </span><span class="o">&lt;---</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;---</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">one</span>
</div><div class="line"><a id="l-5" name="l-5"></a><span class="linenos">5</span><span class="o">-------------|-------------------|---------------------------|---</span>
</div><div class="line"><a id="l-6" name="l-6"></a><span class="linenos">6</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">falls</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="o">|</span><span class="w">                           </span><span class="o">|</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bottom</span>
</div></div></div></section></section><section id="rx_mask_fin"><h3>A Finished Character</h3><p>After 8 bit times have passed, we should have a fully formed character with 8 bits of data (7 of the character + 1 parity). The <code>rxMask</code> will have the one in the top bit. And the rxState will be filled - which just happens to be the value of <code>WAITING-FOR-START-BIT</code> for the next character.</p><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">1</span><span class="w">    </span><span class="nl">rxValue</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span><span class="w">   </span><span class="o">?</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">2</span><span class="o">-------------|-----------------------------------</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">3</span><span class="w">     </span><span class="nl">rxMask</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span><span class="w">   </span><span class="mi">0</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">4</span><span class="w">    </span><span class="nl">rxState</span><span class="p">:</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span><span class="w">   </span><span class="mi">1</span>
</div></div></div></section></section><section id="rx_fxn"><h2>The Full Interrupt Function</h2><p>Understanding how the masking creates the character, you should now be able to follow the full interrupt function below.</p><div class="m-code-arduino"><div class="highlight"><div class="line"><a id="l-1" name="l-1"></a><span class="linenos">  1</span><span class="c1">// Creates a blank slate of bits for an incoming character</span>
</div><div class="line"><a id="l-2" name="l-2"></a><span class="linenos">  2</span><span class="kt">void</span><span class="w"> </span><span class="nf">SDI12::startChar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-3" name="l-3"></a><span class="linenos">  3</span><span class="w">  </span><span class="n">rxState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0b00000000, got a start bit</span>
</div><div class="line"><a id="l-4" name="l-4"></a><span class="linenos">  4</span><span class="w">  </span><span class="n">rxMask</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0b00000001, bit mask, lsb first</span>
</div><div class="line"><a id="l-5" name="l-5"></a><span class="linenos">  5</span><span class="w">  </span><span class="n">rxValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0b00000000, RX character to be, a blank slate</span>
</div><div class="line"><a id="l-6" name="l-6"></a><span class="linenos">  6</span><span class="p">}</span><span class="w">  </span><span class="c1">// startChar</span>
</div><div class="line"><a id="l-7" name="l-7"></a><span class="linenos">  7</span>
</div><div class="line"><a id="l-8" name="l-8"></a><span class="linenos">  8</span><span class="c1">// The actual interrupt service routine</span>
</div><div class="line"><a id="l-9" name="l-9"></a><span class="linenos">  9</span><span class="kt">void</span><span class="w"> </span><span class="nf">SDI12::receiveISR</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-10" name="l-10"></a><span class="linenos"> 10</span><span class="w">  </span><span class="c1">// time of this data transition (plus ISR latency)</span>
</div><div class="line"><a id="l-11" name="l-11"></a><span class="linenos"> 11</span><span class="w">  </span><span class="n">sdi12timer</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">thisBitTCNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">READTIME</span><span class="p">;</span>
</div><div class="line"><a id="l-12" name="l-12"></a><span class="linenos"> 12</span>
</div><div class="line"><a id="l-13" name="l-13"></a><span class="linenos"> 13</span><span class="w">  </span><span class="n">uint8</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">pinLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">digitalRead</span><span class="p">(</span><span class="o">-</span><span class="n">dataPin</span><span class="p">);</span><span class="w">  </span><span class="c1">// current RX data level</span>
</div><div class="line"><a id="l-14" name="l-14"></a><span class="linenos"> 14</span>
</div><div class="line"><a id="l-15" name="l-15"></a><span class="linenos"> 15</span><span class="w">  </span><span class="c1">// Check if we&#39;re ready for a start bit, and if this could possibly be it.</span>
</div><div class="line"><a id="l-16" name="l-16"></a><span class="linenos"> 16</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rxState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WAITING</span><span class="o">-</span><span class="n">FOR</span><span class="o">-</span><span class="n">START</span><span class="o">-</span><span class="n">BIT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-17" name="l-17"></a><span class="linenos"> 17</span><span class="w">    </span><span class="c1">// If we are waiting for a start bit and the pin is low it&#39;s not a start bit, exit</span>
</div><div class="line"><a id="l-18" name="l-18"></a><span class="linenos"> 18</span><span class="w">    </span><span class="c1">// Inverse logic start bit = HIGH</span>
</div><div class="line"><a id="l-19" name="l-19"></a><span class="linenos"> 19</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pinLevel</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LOW</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</div><div class="line"><a id="l-20" name="l-20"></a><span class="linenos"> 20</span><span class="w">    </span><span class="c1">// If the pin is HIGH, this should be a start bit.</span>
</div><div class="line"><a id="l-21" name="l-21"></a><span class="linenos"> 21</span><span class="w">    </span><span class="c1">// Thus startChar(), which sets the rxState to 0, create an empty character, and a</span>
</div><div class="line"><a id="l-22" name="l-22"></a><span class="linenos"> 22</span><span class="w">    </span><span class="c1">// new mask with a 1 in the lowest place</span>
</div><div class="line"><a id="l-23" name="l-23"></a><span class="linenos"> 23</span><span class="w">    </span><span class="n">startChar</span><span class="p">();</span>
</div><div class="line"><a id="l-24" name="l-24"></a><span class="linenos"> 24</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-25" name="l-25"></a><span class="linenos"> 25</span><span class="w">    </span><span class="c1">// If we&#39;re not waiting for a start bit, it&#39;s because we&#39;re in the middle of an</span>
</div><div class="line"><a id="l-26" name="l-26"></a><span class="linenos"> 26</span><span class="w">    </span><span class="c1">// incomplete character and therefore this change in the pin state must be from a</span>
</div><div class="line"><a id="l-27" name="l-27"></a><span class="linenos"> 27</span><span class="w">    </span><span class="c1">// data, parity, or stop bit.</span>
</div><div class="line"><a id="l-28" name="l-28"></a><span class="linenos"> 28</span>
</div><div class="line"><a id="l-29" name="l-29"></a><span class="linenos"> 29</span><span class="w">    </span><span class="c1">// Check how many bit times have passed since the last change</span>
</div><div class="line"><a id="l-30" name="l-30"></a><span class="linenos"> 30</span><span class="w">    </span><span class="n">uint16</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">rxBits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitTimes</span><span class="p">((</span><span class="n">uint8</span><span class="o">-</span><span class="n">t</span><span class="p">)(</span><span class="n">thisBitTCNT</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">prevBitTCNT</span><span class="p">));</span>
</div><div class="line"><a id="l-31" name="l-31"></a><span class="linenos"> 31</span><span class="w">    </span><span class="c1">// Calculate how many *data+parity* bits should be left in the current character</span>
</div><div class="line"><a id="l-32" name="l-32"></a><span class="linenos"> 32</span><span class="w">    </span><span class="c1">//      - Each character has a total of 10 bits, 1 start bit, 7 data bits, 1 parity</span>
</div><div class="line"><a id="l-33" name="l-33"></a><span class="linenos"> 33</span><span class="w">    </span><span class="c1">// bit, and 1 stop bit</span>
</div><div class="line"><a id="l-34" name="l-34"></a><span class="linenos"> 34</span><span class="w">    </span><span class="c1">//      - The #rxState holds record of how many of the data + parity bits we&#39;ve</span>
</div><div class="line"><a id="l-35" name="l-35"></a><span class="linenos"> 35</span><span class="w">    </span><span class="c1">// gotten (up to 8)</span>
</div><div class="line"><a id="l-36" name="l-36"></a><span class="linenos"> 36</span><span class="w">    </span><span class="c1">//      - We have to treat the parity bit as a data bit because we don&#39;t know its</span>
</div><div class="line"><a id="l-37" name="l-37"></a><span class="linenos"> 37</span><span class="w">    </span><span class="c1">// state</span>
</div><div class="line"><a id="l-38" name="l-38"></a><span class="linenos"> 38</span><span class="w">    </span><span class="c1">//      - Since we&#39;re mid character, we know the start bit is past which knocks us</span>
</div><div class="line"><a id="l-39" name="l-39"></a><span class="linenos"> 39</span><span class="w">    </span><span class="c1">// down to 9</span>
</div><div class="line"><a id="l-40" name="l-40"></a><span class="linenos"> 40</span><span class="w">    </span><span class="c1">//      - There will always be one left over for the stop bit, which will be LOW/1</span>
</div><div class="line"><a id="l-41" name="l-41"></a><span class="linenos"> 41</span><span class="w">    </span><span class="n">uint8</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">bitsLeft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">rxState</span><span class="p">;</span>
</div><div class="line"><a id="l-42" name="l-42"></a><span class="linenos"> 42</span><span class="w">    </span><span class="c1">// If the number of bits passed since the last transition is more than then number</span>
</div><div class="line"><a id="l-43" name="l-43"></a><span class="linenos"> 43</span><span class="w">    </span><span class="c1">// of bits left on the character we were working on, a new character must have</span>
</div><div class="line"><a id="l-44" name="l-44"></a><span class="linenos"> 44</span><span class="w">    </span><span class="c1">// started.</span>
</div><div class="line"><a id="l-45" name="l-45"></a><span class="linenos"> 45</span><span class="w">    </span><span class="c1">// This will happen if the parity bit is 1 or the last bit(s) of the character and</span>
</div><div class="line"><a id="l-46" name="l-46"></a><span class="linenos"> 46</span><span class="w">    </span><span class="c1">// the parity bit are all 1&#39;s.</span>
</div><div class="line"><a id="l-47" name="l-47"></a><span class="linenos"> 47</span><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">nextCharStarted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rxBits</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">bitsLeft</span><span class="p">);</span>
</div><div class="line"><a id="l-48" name="l-48"></a><span class="linenos"> 48</span>
</div><div class="line"><a id="l-49" name="l-49"></a><span class="linenos"> 49</span><span class="w">    </span><span class="c1">// Check how many data+parity bits have been sent in this frame.  This will be</span>
</div><div class="line"><a id="l-50" name="l-50"></a><span class="linenos"> 50</span><span class="w">    </span><span class="c1">// different from the rxBits if a new character has started because of the start</span>
</div><div class="line"><a id="l-51" name="l-51"></a><span class="linenos"> 51</span><span class="w">    </span><span class="c1">// and stop bits.</span>
</div><div class="line"><a id="l-52" name="l-52"></a><span class="linenos"> 52</span><span class="w">    </span><span class="c1">//      - If the total number of bits in this frame is more than the number of</span>
</div><div class="line"><a id="l-53" name="l-53"></a><span class="linenos"> 53</span><span class="w">    </span><span class="c1">// data+parity bits remaining in the character, then the number of data+parity bits</span>
</div><div class="line"><a id="l-54" name="l-54"></a><span class="linenos"> 54</span><span class="w">    </span><span class="c1">// is equal to the number of bits remaining for the character and partiy.</span>
</div><div class="line"><a id="l-55" name="l-55"></a><span class="linenos"> 55</span><span class="w">    </span><span class="c1">//      - If the total number of bits in this frame is less than the number of data</span>
</div><div class="line"><a id="l-56" name="l-56"></a><span class="linenos"> 56</span><span class="w">    </span><span class="c1">// bits left for the character and parity, then the number of data+parity bits</span>
</div><div class="line"><a id="l-57" name="l-57"></a><span class="linenos"> 57</span><span class="w">    </span><span class="c1">// received in this frame is equal to the total number of bits received in this</span>
</div><div class="line"><a id="l-58" name="l-58"></a><span class="linenos"> 58</span><span class="w">    </span><span class="c1">// frame.</span>
</div><div class="line"><a id="l-59" name="l-59"></a><span class="linenos"> 59</span><span class="w">    </span><span class="c1">// translation:</span>
</div><div class="line"><a id="l-60" name="l-60"></a><span class="linenos"> 60</span><span class="w">    </span><span class="c1">//    if nextCharStarted then bitsThisFrame = bitsLeft</span>
</div><div class="line"><a id="l-61" name="l-61"></a><span class="linenos"> 61</span><span class="w">    </span><span class="c1">//                       else bitsThisFrame = rxBits</span>
</div><div class="line"><a id="l-62" name="l-62"></a><span class="linenos"> 62</span><span class="w">    </span><span class="n">uint8</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">bitsThisFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nextCharStarted</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">bitsLeft</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">rxBits</span><span class="p">;</span>
</div><div class="line"><a id="l-63" name="l-63"></a><span class="linenos"> 63</span><span class="w">    </span><span class="c1">// Tick up the rxState by the number of data+parity bits received in the frame</span>
</div><div class="line"><a id="l-64" name="l-64"></a><span class="linenos"> 64</span><span class="w">    </span><span class="n">rxState</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">bitsThisFrame</span><span class="p">;</span>
</div><div class="line"><a id="l-65" name="l-65"></a><span class="linenos"> 65</span>
</div><div class="line"><a id="l-66" name="l-66"></a><span class="linenos"> 66</span><span class="w">    </span><span class="c1">// Set all the bits received between the last change and this change</span>
</div><div class="line"><a id="l-67" name="l-67"></a><span class="linenos"> 67</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pinLevel</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HIGH</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-68" name="l-68"></a><span class="linenos"> 68</span><span class="w">      </span><span class="c1">// If the current state is HIGH (and it just became so), then all bits between</span>
</div><div class="line"><a id="l-69" name="l-69"></a><span class="linenos"> 69</span><span class="w">      </span><span class="c1">// the last change and now must have been LOW.</span>
</div><div class="line"><a id="l-70" name="l-70"></a><span class="linenos"> 70</span><span class="w">      </span><span class="c1">// back fill previous bits with 1&#39;s (inverse logic - LOW = 1)</span>
</div><div class="line"><a id="l-71" name="l-71"></a><span class="linenos"> 71</span><span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">bitsThisFrame</span><span class="o">--</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-72" name="l-72"></a><span class="linenos"> 72</span><span class="w">        </span><span class="c1">// for each of the bits that happened in this frame</span>
</div><div class="line"><a id="l-73" name="l-73"></a><span class="linenos"> 73</span>
</div><div class="line"><a id="l-74" name="l-74"></a><span class="linenos"> 74</span><span class="w">        </span><span class="n">rxValue</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">rxMask</span><span class="p">;</span><span class="w">     </span><span class="c1">// Add a 1 to the LSB/right-most place of our character</span>
</div><div class="line"><a id="l-75" name="l-75"></a><span class="linenos"> 75</span><span class="w">                               </span><span class="c1">// value from the mask</span>
</div><div class="line"><a id="l-76" name="l-76"></a><span class="linenos"> 76</span><span class="w">        </span><span class="n">rxMask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rxMask</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1">// Shift the 1 in the mask up by one position</span>
</div><div class="line"><a id="l-77" name="l-77"></a><span class="linenos"> 77</span><span class="w">      </span><span class="p">}</span>
</div><div class="line"><a id="l-78" name="l-78"></a><span class="linenos"> 78</span><span class="w">      </span><span class="c1">// And shift the 1 in the mask up by one more position for the current bit.</span>
</div><div class="line"><a id="l-79" name="l-79"></a><span class="linenos"> 79</span><span class="w">      </span><span class="c1">// It&#39;s HIGH/0 now, so we don&#39;t use `|=` with the mask for this last one.</span>
</div><div class="line"><a id="l-80" name="l-80"></a><span class="linenos"> 80</span><span class="w">      </span><span class="n">rxMask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rxMask</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</div><div class="line"><a id="l-81" name="l-81"></a><span class="linenos"> 81</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-82" name="l-82"></a><span class="linenos"> 82</span><span class="w">      </span><span class="c1">// If the current state is LOW (and it just became so), then this bit is LOW</span>
</div><div class="line"><a id="l-83" name="l-83"></a><span class="linenos"> 83</span><span class="w">      </span><span class="c1">// but all bits between the last change and now must have been HIGH</span>
</div><div class="line"><a id="l-84" name="l-84"></a><span class="linenos"> 84</span>
</div><div class="line"><a id="l-85" name="l-85"></a><span class="linenos"> 85</span><span class="w">      </span><span class="c1">// pinLevel==LOW</span>
</div><div class="line"><a id="l-86" name="l-86"></a><span class="linenos"> 86</span><span class="w">      </span><span class="c1">// previous bits were 0&#39;s so only this bit is a 1 (inverse logic - LOW = 1)</span>
</div><div class="line"><a id="l-87" name="l-87"></a><span class="linenos"> 87</span><span class="w">      </span><span class="n">rxMask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rxMask</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">bitsThisFrame</span><span class="w"> </span><span class="o">-</span>
</div><div class="line"><a id="l-88" name="l-88"></a><span class="linenos"> 88</span><span class="w">                          </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Shift the 1 in the mask up by the number of bits past</span>
</div><div class="line"><a id="l-89" name="l-89"></a><span class="linenos"> 89</span><span class="w">      </span><span class="n">rxValue</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">rxMask</span><span class="p">;</span><span class="w">  </span><span class="c1">//  And add that shifted one to the character being created</span>
</div><div class="line"><a id="l-90" name="l-90"></a><span class="linenos"> 90</span><span class="w">    </span><span class="p">}</span>
</div><div class="line"><a id="l-91" name="l-91"></a><span class="linenos"> 91</span>
</div><div class="line"><a id="l-92" name="l-92"></a><span class="linenos"> 92</span><span class="w">    </span><span class="c1">// If this was the 8th or more bit then the character and parity are complete.</span>
</div><div class="line"><a id="l-93" name="l-93"></a><span class="linenos"> 93</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rxState</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-94" name="l-94"></a><span class="linenos"> 94</span><span class="w">      </span><span class="n">rxValue</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="mh">0x7F</span><span class="p">;</span><span class="w">        </span><span class="c1">// Throw away the parity bit (and with 0b01111111)</span>
</div><div class="line"><a id="l-95" name="l-95"></a><span class="linenos"> 95</span><span class="w">      </span><span class="n">charToBuffer</span><span class="p">(</span><span class="n">rxValue</span><span class="p">);</span><span class="w">  </span><span class="c1">// Put the finished character into the buffer</span>
</div><div class="line"><a id="l-96" name="l-96"></a><span class="linenos"> 96</span>
</div><div class="line"><a id="l-97" name="l-97"></a><span class="linenos"> 97</span>
</div><div class="line"><a id="l-98" name="l-98"></a><span class="linenos"> 98</span><span class="w">      </span><span class="c1">// if this is LOW, or we haven&#39;t exceeded the number of bits in a</span>
</div><div class="line"><a id="l-99" name="l-99"></a><span class="linenos"> 99</span><span class="w">      </span><span class="c1">// character (but have gotten all the data bits) then this should be a</span>
</div><div class="line"><a id="l-100" name="l-100"></a><span class="linenos">100</span><span class="w">      </span><span class="c1">// stop bit and we can start looking for a new start bit.</span>
</div><div class="line"><a id="l-101" name="l-101"></a><span class="linenos">101</span><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">pinLevel</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LOW</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">nextCharStarted</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-102" name="l-102"></a><span class="linenos">102</span><span class="w">        </span><span class="n">rxState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WAITING</span><span class="o">-</span><span class="n">FOR</span><span class="o">-</span><span class="n">START</span><span class="o">-</span><span class="n">BIT</span><span class="p">;</span><span class="w">  </span><span class="c1">// DISABLE STOP BIT TIMER</span>
</div><div class="line"><a id="l-103" name="l-103"></a><span class="linenos">103</span><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-104" name="l-104"></a><span class="linenos">104</span><span class="w">        </span><span class="c1">// If we just switched to HIGH, or we&#39;ve exceeded the total number of</span>
</div><div class="line"><a id="l-105" name="l-105"></a><span class="linenos">105</span><span class="w">        </span><span class="c1">// bits in a character, then the character must have ended with 1&#39;s/LOW,</span>
</div><div class="line"><a id="l-106" name="l-106"></a><span class="linenos">106</span><span class="w">        </span><span class="c1">// and this new 0/HIGH is actually the start bit of the next character.</span>
</div><div class="line"><a id="l-107" name="l-107"></a><span class="linenos">107</span><span class="w">        </span><span class="n">startChar</span><span class="p">();</span>
</div><div class="line"><a id="l-108" name="l-108"></a><span class="linenos">108</span><span class="w">      </span><span class="p">}</span>
</div><div class="line"><a id="l-109" name="l-109"></a><span class="linenos">109</span><span class="w">    </span><span class="p">}</span>
</div><div class="line"><a id="l-110" name="l-110"></a><span class="linenos">110</span><span class="w">  </span><span class="p">}</span>
</div><div class="line"><a id="l-111" name="l-111"></a><span class="linenos">111</span><span class="w">  </span><span class="n">prevBitTCNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thisBitTCNT</span><span class="p">;</span><span class="w">  </span><span class="c1">// finally remember time stamp of this change!</span>
</div><div class="line"><a id="l-112" name="l-112"></a><span class="linenos">112</span><span class="p">}</span>
</div><div class="line"><a id="l-113" name="l-113"></a><span class="linenos">113</span>
</div><div class="line"><a id="l-114" name="l-114"></a><span class="linenos">114</span><span class="c1">// Put a new character in the buffer</span>
</div><div class="line"><a id="l-115" name="l-115"></a><span class="linenos">115</span><span class="kt">void</span><span class="w"> </span><span class="nf">SDI12::charToBuffer</span><span class="p">(</span><span class="n">uint8</span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-116" name="l-116"></a><span class="linenos">116</span><span class="w">  </span><span class="c1">// Check for a buffer overflow. If not, proceed.</span>
</div><div class="line"><a id="l-117" name="l-117"></a><span class="linenos">117</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="o">-</span><span class="n">rxBufferTail</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">SDI12</span><span class="o">-</span><span class="n">BUFFER</span><span class="o">-</span><span class="n">SIZE</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="n">rxBufferHead</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-118" name="l-118"></a><span class="linenos">118</span><span class="w">    </span><span class="o">-</span><span class="n">bufferOverflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</div><div class="line"><a id="l-119" name="l-119"></a><span class="linenos">119</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</div><div class="line"><a id="l-120" name="l-120"></a><span class="linenos">120</span><span class="w">    </span><span class="c1">// Save the character, advance buffer tail.</span>
</div><div class="line"><a id="l-121" name="l-121"></a><span class="linenos">121</span><span class="w">    </span><span class="o">-</span><span class="n">rxBuffer</span><span class="p">[</span><span class="o">-</span><span class="n">rxBufferTail</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</div><div class="line"><a id="l-122" name="l-122"></a><span class="linenos">122</span><span class="w">    </span><span class="o">-</span><span class="n">rxBufferTail</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">rxBufferTail</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">SDI12</span><span class="o">-</span><span class="n">BUFFER</span><span class="o">-</span><span class="n">SIZE</span><span class="p">;</span>
</div><div class="line"><a id="l-123" name="l-123"></a><span class="linenos">123</span><span class="w">  </span><span class="p">}</span>
</div><div class="line"><a id="l-124" name="l-124"></a><span class="linenos">124</span><span class="p">}</span>
</div></div></div></section>
              </article>
            </main>

          </div> <!-- gp-content -->
        </div> <!-- gp-left-column -->
      </div> <!-- gp-inner-container -->
    </div> <!-- gp-content-wrapper -->

    <div id="footer-image">
      <div class="gp-container">
        <img
          src="https://www.envirodiy.org/wp-content/uploads/2016/05/EnviroDIY_LogoMaster_Square_V5_TwoTree_Trans_notext-e1462820115833.png"
          width="99"
          height="22"
          alt=""
        />
      </div>
    </div>

    <footer id="gp-footer">
      <div id="gp-copyright">
        <div class="gp-container">
          <div id="gp-copyright-text">
            <p>
              <a href="https://stroudcenter.org/" target="_blank"
                >EnviroDIY™ is a community for do-it-yourself ideas for environmental
                science and monitoring. EnviroDIY is an initiative of
                <a
                  style="text-decoration: underline"
                  href="https://stroudcenter.org/"
                  target="_blank"
                  >Stroud Water Research Center</a
                >, which advances knowledge and stewardship of freshwater systems through
                global research, education, and watershed restoration.
              </a>
            </p>
            <p>
              All content on EnviroDIY is licensed as Creative Commons
              Attribution-ShareAlike 4.0 International (CC-BY-SA). Hardware designs on this
              website are released under the CERN Open Hardware License 1.2.
              <a style="text-decoration: underline" href="https://envirodiy.org/licenses/"
                >See all licenses.</a
              >
              <a style="text-decoration: underline" href="https://envirodiy.org/terms/"
                >Terms of Use</a
              >
              |
              <a style="text-decoration: underline" href="https://envirodiy.org/privacy/"
                >Privacy Policy</a
              >
              |
              <a style="text-decoration: underline" href="https://envirodiy.org/cookies/"
                >Cookie Policy</a
              >
              |
              <a
                style="text-decoration: underline"
                href="https://envirodiy.org/shop-policies/"
                >Shop Policies</a
              >
              |
              <a style="text-decoration: underline" href="https://envirodiy.org/contact/"
                >Contact</a
              >
            </p>
            <p>
              Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <div class="gp-clear"></div>

    </div> <!-- gp-site-wrapper -->
  </div> <!-- gp-site-wrapper -->

</body>
</html>
